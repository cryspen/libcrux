/* 
  This file was generated by KaRaMeL <https://github.com/FStarLang/karamel>
  KaRaMeL invocation: /Users/jonathan/Code/eurydice/eurydice --config ../c.yaml ../../libcrux_ml_kem.llbc ../../libcrux_sha3.llbc --log Phase3
  F* version: 58c915a8
  KaRaMeL version: 04cb86b9
 */

#include "internal/libcrux_polynomial.h"

#include "internal/libcrux_core.h"

const
int16_t
libcrux_ml_kem_polynomial_ZETAS_TIMES_MONTGOMERY_R[128U] =
  {
    (int16_t)-1044, (int16_t)-758, (int16_t)-359, (int16_t)-1517, (int16_t)1493, (int16_t)1422,
    (int16_t)287, (int16_t)202, (int16_t)-171, (int16_t)622, (int16_t)1577, (int16_t)182,
    (int16_t)962, (int16_t)-1202, (int16_t)-1474, (int16_t)1468, (int16_t)573, (int16_t)-1325,
    (int16_t)264, (int16_t)383, (int16_t)-829, (int16_t)1458, (int16_t)-1602, (int16_t)-130,
    (int16_t)-681, (int16_t)1017, (int16_t)732, (int16_t)608, (int16_t)-1542, (int16_t)411,
    (int16_t)-205, (int16_t)-1571, (int16_t)1223, (int16_t)652, (int16_t)-552, (int16_t)1015,
    (int16_t)-1293, (int16_t)1491, (int16_t)-282, (int16_t)-1544, (int16_t)516, (int16_t)-8,
    (int16_t)-320, (int16_t)-666, (int16_t)-1618, (int16_t)-1162, (int16_t)126, (int16_t)1469,
    (int16_t)-853, (int16_t)-90, (int16_t)-271, (int16_t)830, (int16_t)107, (int16_t)-1421,
    (int16_t)-247, (int16_t)-951, (int16_t)-398, (int16_t)961, (int16_t)-1508, (int16_t)-725,
    (int16_t)448, (int16_t)-1065, (int16_t)677, (int16_t)-1275, (int16_t)-1103, (int16_t)430,
    (int16_t)555, (int16_t)843, (int16_t)-1251, (int16_t)871, (int16_t)1550, (int16_t)105,
    (int16_t)422, (int16_t)587, (int16_t)177, (int16_t)-235, (int16_t)-291, (int16_t)-460,
    (int16_t)1574, (int16_t)1653, (int16_t)-246, (int16_t)778, (int16_t)1159, (int16_t)-147,
    (int16_t)-777, (int16_t)1483, (int16_t)-602, (int16_t)1119, (int16_t)-1590, (int16_t)644,
    (int16_t)-872, (int16_t)349, (int16_t)418, (int16_t)329, (int16_t)-156, (int16_t)-75,
    (int16_t)817, (int16_t)1097, (int16_t)603, (int16_t)610, (int16_t)1322, (int16_t)-1285,
    (int16_t)-1465, (int16_t)384, (int16_t)-1215, (int16_t)-136, (int16_t)1218, (int16_t)-1335,
    (int16_t)-874, (int16_t)220, (int16_t)-1187, (int16_t)-1659, (int16_t)-1185, (int16_t)-1530,
    (int16_t)-1278, (int16_t)794, (int16_t)-1510, (int16_t)-854, (int16_t)-870, (int16_t)478,
    (int16_t)-108, (int16_t)-308, (int16_t)996, (int16_t)991, (int16_t)958, (int16_t)-1460,
    (int16_t)1522, (int16_t)1628
  };

const
uint8_t
libcrux_ml_kem_vector_rej_sample_table_REJECTION_SAMPLE_SHUFFLE_TABLE[256U][16U] =
  {
    {
      255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U
    },
    { 0U, 1U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 4U, 5U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 4U, 5U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 4U, 5U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 4U, 5U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 6U, 7U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 6U, 7U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 6U, 7U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 6U, 7U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 4U, 5U, 6U, 7U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 4U, 5U, 6U, 7U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 4U, 5U, 6U, 7U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 4U, 5U, 6U, 7U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 8U, 9U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 8U, 9U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 8U, 9U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 8U, 9U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 4U, 5U, 8U, 9U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 4U, 5U, 8U, 9U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 4U, 5U, 8U, 9U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 4U, 5U, 8U, 9U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 6U, 7U, 8U, 9U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 6U, 7U, 8U, 9U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 6U, 7U, 8U, 9U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 6U, 7U, 8U, 9U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 4U, 5U, 6U, 7U, 8U, 9U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 4U, 5U, 6U, 7U, 8U, 9U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 4U, 5U, 6U, 7U, 8U, 9U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 4U, 5U, 6U, 7U, 8U, 9U, 255U, 255U, 255U, 255U, 255U, 255U },
    {
      10U, 11U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U
    }, { 0U, 1U, 10U, 11U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 10U, 11U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 10U, 11U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 4U, 5U, 10U, 11U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 4U, 5U, 10U, 11U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 4U, 5U, 10U, 11U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 4U, 5U, 10U, 11U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 6U, 7U, 10U, 11U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 6U, 7U, 10U, 11U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 6U, 7U, 10U, 11U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 6U, 7U, 10U, 11U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 4U, 5U, 6U, 7U, 10U, 11U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 4U, 5U, 6U, 7U, 10U, 11U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 4U, 5U, 6U, 7U, 10U, 11U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 4U, 5U, 6U, 7U, 10U, 11U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 8U, 9U, 10U, 11U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 8U, 9U, 10U, 11U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 8U, 9U, 10U, 11U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 8U, 9U, 10U, 11U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 4U, 5U, 8U, 9U, 10U, 11U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 4U, 5U, 8U, 9U, 10U, 11U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 4U, 5U, 8U, 9U, 10U, 11U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 4U, 5U, 8U, 9U, 10U, 11U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 6U, 7U, 8U, 9U, 10U, 11U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 6U, 7U, 8U, 9U, 10U, 11U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 6U, 7U, 8U, 9U, 10U, 11U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 6U, 7U, 8U, 9U, 10U, 11U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 4U, 5U, 6U, 7U, 8U, 9U, 10U, 11U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 4U, 5U, 6U, 7U, 8U, 9U, 10U, 11U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 4U, 5U, 6U, 7U, 8U, 9U, 10U, 11U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 4U, 5U, 6U, 7U, 8U, 9U, 10U, 11U, 255U, 255U, 255U, 255U },
    {
      12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U
    }, { 0U, 1U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 4U, 5U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 4U, 5U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 4U, 5U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 4U, 5U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 6U, 7U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 6U, 7U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 6U, 7U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 6U, 7U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 4U, 5U, 6U, 7U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 4U, 5U, 6U, 7U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 4U, 5U, 6U, 7U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 4U, 5U, 6U, 7U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 8U, 9U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 8U, 9U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 8U, 9U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 8U, 9U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 4U, 5U, 8U, 9U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 4U, 5U, 8U, 9U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 4U, 5U, 8U, 9U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 4U, 5U, 8U, 9U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 6U, 7U, 8U, 9U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 6U, 7U, 8U, 9U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 6U, 7U, 8U, 9U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 6U, 7U, 8U, 9U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 4U, 5U, 6U, 7U, 8U, 9U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 4U, 5U, 6U, 7U, 8U, 9U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 4U, 5U, 6U, 7U, 8U, 9U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 4U, 5U, 6U, 7U, 8U, 9U, 12U, 13U, 255U, 255U, 255U, 255U },
    { 10U, 11U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 10U, 11U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 10U, 11U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 10U, 11U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 4U, 5U, 10U, 11U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 4U, 5U, 10U, 11U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 4U, 5U, 10U, 11U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 4U, 5U, 10U, 11U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 6U, 7U, 10U, 11U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 6U, 7U, 10U, 11U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 6U, 7U, 10U, 11U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 6U, 7U, 10U, 11U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 4U, 5U, 6U, 7U, 10U, 11U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 4U, 5U, 6U, 7U, 10U, 11U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 4U, 5U, 6U, 7U, 10U, 11U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 4U, 5U, 6U, 7U, 10U, 11U, 12U, 13U, 255U, 255U, 255U, 255U },
    { 8U, 9U, 10U, 11U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 8U, 9U, 10U, 11U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 8U, 9U, 10U, 11U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 8U, 9U, 10U, 11U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 4U, 5U, 8U, 9U, 10U, 11U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 4U, 5U, 8U, 9U, 10U, 11U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 4U, 5U, 8U, 9U, 10U, 11U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 4U, 5U, 8U, 9U, 10U, 11U, 12U, 13U, 255U, 255U, 255U, 255U },
    { 6U, 7U, 8U, 9U, 10U, 11U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 6U, 7U, 8U, 9U, 10U, 11U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 6U, 7U, 8U, 9U, 10U, 11U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 6U, 7U, 8U, 9U, 10U, 11U, 12U, 13U, 255U, 255U, 255U, 255U },
    { 4U, 5U, 6U, 7U, 8U, 9U, 10U, 11U, 12U, 13U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 4U, 5U, 6U, 7U, 8U, 9U, 10U, 11U, 12U, 13U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 4U, 5U, 6U, 7U, 8U, 9U, 10U, 11U, 12U, 13U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 4U, 5U, 6U, 7U, 8U, 9U, 10U, 11U, 12U, 13U, 255U, 255U },
    {
      14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U
    }, { 0U, 1U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 4U, 5U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 4U, 5U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 4U, 5U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 4U, 5U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 6U, 7U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 6U, 7U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 6U, 7U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 6U, 7U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 4U, 5U, 6U, 7U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 4U, 5U, 6U, 7U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 4U, 5U, 6U, 7U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 4U, 5U, 6U, 7U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 8U, 9U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 8U, 9U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 8U, 9U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 8U, 9U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 4U, 5U, 8U, 9U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 4U, 5U, 8U, 9U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 4U, 5U, 8U, 9U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 4U, 5U, 8U, 9U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 6U, 7U, 8U, 9U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 6U, 7U, 8U, 9U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 6U, 7U, 8U, 9U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 6U, 7U, 8U, 9U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 4U, 5U, 6U, 7U, 8U, 9U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 4U, 5U, 6U, 7U, 8U, 9U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 4U, 5U, 6U, 7U, 8U, 9U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 4U, 5U, 6U, 7U, 8U, 9U, 14U, 15U, 255U, 255U, 255U, 255U },
    { 10U, 11U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 10U, 11U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 10U, 11U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 10U, 11U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 4U, 5U, 10U, 11U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 4U, 5U, 10U, 11U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 4U, 5U, 10U, 11U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 4U, 5U, 10U, 11U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 6U, 7U, 10U, 11U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 6U, 7U, 10U, 11U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 6U, 7U, 10U, 11U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 6U, 7U, 10U, 11U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 4U, 5U, 6U, 7U, 10U, 11U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 4U, 5U, 6U, 7U, 10U, 11U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 4U, 5U, 6U, 7U, 10U, 11U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 4U, 5U, 6U, 7U, 10U, 11U, 14U, 15U, 255U, 255U, 255U, 255U },
    { 8U, 9U, 10U, 11U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 8U, 9U, 10U, 11U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 8U, 9U, 10U, 11U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 8U, 9U, 10U, 11U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 4U, 5U, 8U, 9U, 10U, 11U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 4U, 5U, 8U, 9U, 10U, 11U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 4U, 5U, 8U, 9U, 10U, 11U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 4U, 5U, 8U, 9U, 10U, 11U, 14U, 15U, 255U, 255U, 255U, 255U },
    { 6U, 7U, 8U, 9U, 10U, 11U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 6U, 7U, 8U, 9U, 10U, 11U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 6U, 7U, 8U, 9U, 10U, 11U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 6U, 7U, 8U, 9U, 10U, 11U, 14U, 15U, 255U, 255U, 255U, 255U },
    { 4U, 5U, 6U, 7U, 8U, 9U, 10U, 11U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 4U, 5U, 6U, 7U, 8U, 9U, 10U, 11U, 14U, 15U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 4U, 5U, 6U, 7U, 8U, 9U, 10U, 11U, 14U, 15U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 4U, 5U, 6U, 7U, 8U, 9U, 10U, 11U, 14U, 15U, 255U, 255U },
    { 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 4U, 5U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 4U, 5U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 4U, 5U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 4U, 5U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 6U, 7U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 6U, 7U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 6U, 7U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 6U, 7U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 4U, 5U, 6U, 7U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 4U, 5U, 6U, 7U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 4U, 5U, 6U, 7U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 4U, 5U, 6U, 7U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U },
    { 8U, 9U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 8U, 9U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 8U, 9U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 8U, 9U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 4U, 5U, 8U, 9U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 4U, 5U, 8U, 9U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 4U, 5U, 8U, 9U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 4U, 5U, 8U, 9U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U },
    { 6U, 7U, 8U, 9U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 6U, 7U, 8U, 9U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 6U, 7U, 8U, 9U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 6U, 7U, 8U, 9U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U },
    { 4U, 5U, 6U, 7U, 8U, 9U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 4U, 5U, 6U, 7U, 8U, 9U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 4U, 5U, 6U, 7U, 8U, 9U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 4U, 5U, 6U, 7U, 8U, 9U, 12U, 13U, 14U, 15U, 255U, 255U },
    { 10U, 11U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 10U, 11U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 10U, 11U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 10U, 11U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 4U, 5U, 10U, 11U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 4U, 5U, 10U, 11U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 4U, 5U, 10U, 11U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 4U, 5U, 10U, 11U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U },
    { 6U, 7U, 10U, 11U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 6U, 7U, 10U, 11U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 6U, 7U, 10U, 11U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 6U, 7U, 10U, 11U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U },
    { 4U, 5U, 6U, 7U, 10U, 11U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 4U, 5U, 6U, 7U, 10U, 11U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 4U, 5U, 6U, 7U, 10U, 11U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 4U, 5U, 6U, 7U, 10U, 11U, 12U, 13U, 14U, 15U, 255U, 255U },
    { 8U, 9U, 10U, 11U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 8U, 9U, 10U, 11U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 8U, 9U, 10U, 11U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 8U, 9U, 10U, 11U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U },
    { 4U, 5U, 8U, 9U, 10U, 11U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 4U, 5U, 8U, 9U, 10U, 11U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 4U, 5U, 8U, 9U, 10U, 11U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 4U, 5U, 8U, 9U, 10U, 11U, 12U, 13U, 14U, 15U, 255U, 255U },
    { 6U, 7U, 8U, 9U, 10U, 11U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 6U, 7U, 8U, 9U, 10U, 11U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U },
    { 2U, 3U, 6U, 7U, 8U, 9U, 10U, 11U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 6U, 7U, 8U, 9U, 10U, 11U, 12U, 13U, 14U, 15U, 255U, 255U },
    { 4U, 5U, 6U, 7U, 8U, 9U, 10U, 11U, 12U, 13U, 14U, 15U, 255U, 255U, 255U, 255U },
    { 0U, 1U, 4U, 5U, 6U, 7U, 8U, 9U, 10U, 11U, 12U, 13U, 14U, 15U, 255U, 255U },
    { 2U, 3U, 4U, 5U, 6U, 7U, 8U, 9U, 10U, 11U, 12U, 13U, 14U, 15U, 255U, 255U },
    { 0U, 1U, 2U, 3U, 4U, 5U, 6U, 7U, 8U, 9U, 10U, 11U, 12U, 13U, 14U, 15U }
  };

static inline libcrux_ml_kem_vector_PortableVector zero(void)
{
  libcrux_ml_kem_vector_PortableVector lit;
  lit.elements[0U] = (int16_t)0;
  lit.elements[1U] = (int16_t)0;
  lit.elements[2U] = (int16_t)0;
  lit.elements[3U] = (int16_t)0;
  lit.elements[4U] = (int16_t)0;
  lit.elements[5U] = (int16_t)0;
  lit.elements[6U] = (int16_t)0;
  lit.elements[7U] = (int16_t)0;
  lit.elements[8U] = (int16_t)0;
  lit.elements[9U] = (int16_t)0;
  lit.elements[10U] = (int16_t)0;
  lit.elements[11U] = (int16_t)0;
  lit.elements[12U] = (int16_t)0;
  lit.elements[13U] = (int16_t)0;
  lit.elements[14U] = (int16_t)0;
  lit.elements[15U] = (int16_t)0;
  return lit;
}

static libcrux_ml_kem_vector_PortableVector ZERO(void)
{
  return zero();
}

static inline libcrux_ml_kem_vector_PortableVector from_i16_array(Eurydice_slice array)
{
  libcrux_ml_kem_vector_PortableVector lit;
  int16_t ret[16U];
  core_result_Result__int16_t_16size_t__core_array_TryFromSliceError dst;
  Eurydice_slice_to_array2(&dst,
    Eurydice_slice_subslice(array,
      ((core_ops_range_Range__size_t){ .start = (size_t)0U, .end = (size_t)16U }),
      int16_t,
      core_ops_range_Range__size_t,
      Eurydice_slice),
    Eurydice_slice,
    int16_t [16U],
    void *);
  core_result__core__result__Result_T__E___unwrap__int16_t_16size_t__core_array_TryFromSliceError(dst,
    ret);
  memcpy(lit.elements, ret, (size_t)16U * sizeof (int16_t));
  return lit;
}

static libcrux_ml_kem_vector_PortableVector from_i16_array0(Eurydice_slice array)
{
  return from_i16_array(array);
}

static inline libcrux_ml_kem_vector_PortableVector
add(libcrux_ml_kem_vector_PortableVector lhs, libcrux_ml_kem_vector_PortableVector *rhs)
{
  for (size_t i = (size_t)0U; i < LIBCRUX_ML_KEM_VECTOR_TRAITS_FIELD_ELEMENTS_IN_VECTOR; i++)
  {
    size_t i0 = i;
    size_t uu____0 = i0;
    lhs.elements[uu____0] = lhs.elements[uu____0] + rhs->elements[i0];
  }
  return lhs;
}

libcrux_ml_kem_vector_PortableVector
libcrux_ml_kem_vector___libcrux_ml_kem__vector__traits__Operations_for_libcrux_ml_kem__vector__PortableVector___add(
  libcrux_ml_kem_vector_PortableVector lhs,
  libcrux_ml_kem_vector_PortableVector *rhs
)
{
  return add(lhs, rhs);
}

static inline libcrux_ml_kem_vector_PortableVector
sub(libcrux_ml_kem_vector_PortableVector lhs, libcrux_ml_kem_vector_PortableVector *rhs)
{
  for (size_t i = (size_t)0U; i < LIBCRUX_ML_KEM_VECTOR_TRAITS_FIELD_ELEMENTS_IN_VECTOR; i++)
  {
    size_t i0 = i;
    size_t uu____0 = i0;
    lhs.elements[uu____0] = lhs.elements[uu____0] - rhs->elements[i0];
  }
  return lhs;
}

libcrux_ml_kem_vector_PortableVector
libcrux_ml_kem_vector___libcrux_ml_kem__vector__traits__Operations_for_libcrux_ml_kem__vector__PortableVector___sub(
  libcrux_ml_kem_vector_PortableVector lhs,
  libcrux_ml_kem_vector_PortableVector *rhs
)
{
  return sub(lhs, rhs);
}

static inline libcrux_ml_kem_vector_PortableVector
multiply_by_constant(libcrux_ml_kem_vector_PortableVector v, int16_t c)
{
  for (size_t i = (size_t)0U; i < LIBCRUX_ML_KEM_VECTOR_TRAITS_FIELD_ELEMENTS_IN_VECTOR; i++)
  {
    size_t i0 = i;
    size_t uu____0 = i0;
    v.elements[uu____0] = v.elements[uu____0] * c;
  }
  return v;
}

libcrux_ml_kem_vector_PortableVector
libcrux_ml_kem_vector___libcrux_ml_kem__vector__traits__Operations_for_libcrux_ml_kem__vector__PortableVector___multiply_by_constant(
  libcrux_ml_kem_vector_PortableVector v,
  int16_t c
)
{
  return multiply_by_constant(v, c);
}

static inline libcrux_ml_kem_vector_PortableVector
bitwise_and_with_constant(libcrux_ml_kem_vector_PortableVector v, int16_t c)
{
  for (size_t i = (size_t)0U; i < LIBCRUX_ML_KEM_VECTOR_TRAITS_FIELD_ELEMENTS_IN_VECTOR; i++)
  {
    size_t i0 = i;
    size_t uu____0 = i0;
    v.elements[uu____0] = v.elements[uu____0] & c;
  }
  return v;
}

static libcrux_ml_kem_vector_PortableVector
bitwise_and_with_constant0(libcrux_ml_kem_vector_PortableVector v, int16_t c)
{
  return bitwise_and_with_constant(v, c);
}

static inline libcrux_ml_kem_vector_PortableVector
cond_subtract_3329(libcrux_ml_kem_vector_PortableVector v)
{
  for (size_t i = (size_t)0U; i < LIBCRUX_ML_KEM_VECTOR_TRAITS_FIELD_ELEMENTS_IN_VECTOR; i++)
  {
    size_t i0 = i;
    if (v.elements[i0] >= (int16_t)3329)
    {
      size_t uu____0 = i0;
      v.elements[uu____0] = v.elements[uu____0] - (int16_t)3329;
    }
  }
  return v;
}

libcrux_ml_kem_vector_PortableVector
libcrux_ml_kem_vector___libcrux_ml_kem__vector__traits__Operations_for_libcrux_ml_kem__vector__PortableVector___cond_subtract_3329(
  libcrux_ml_kem_vector_PortableVector v
)
{
  return cond_subtract_3329(v);
}

#define BARRETT_MULTIPLIER ((int32_t)20159)

#define BARRETT_SHIFT ((int32_t)26)

#define BARRETT_R ((int32_t)1 << (uint32_t)BARRETT_SHIFT)

static int16_t barrett_reduce_element(int16_t value)
{
  int32_t t = (int32_t)value * BARRETT_MULTIPLIER + (BARRETT_R >> 1U);
  int16_t quotient = (int16_t)(t >> (uint32_t)BARRETT_SHIFT);
  return value - quotient * LIBCRUX_ML_KEM_VECTOR_TRAITS_FIELD_MODULUS;
}

static inline libcrux_ml_kem_vector_PortableVector
barrett_reduce(libcrux_ml_kem_vector_PortableVector v)
{
  for (size_t i = (size_t)0U; i < LIBCRUX_ML_KEM_VECTOR_TRAITS_FIELD_ELEMENTS_IN_VECTOR; i++)
  {
    size_t i0 = i;
    int16_t uu____0 = barrett_reduce_element(v.elements[i0]);
    v.elements[i0] = uu____0;
  }
  return v;
}

libcrux_ml_kem_vector_PortableVector
libcrux_ml_kem_vector___libcrux_ml_kem__vector__traits__Operations_for_libcrux_ml_kem__vector__PortableVector___barrett_reduce(
  libcrux_ml_kem_vector_PortableVector v
)
{
  return barrett_reduce(v);
}

#define MONTGOMERY_SHIFT (16U)

static int16_t montgomery_reduce_element(int32_t value)
{
  int32_t
  k =
    (int32_t)(int16_t)value
    * (int32_t)LIBCRUX_ML_KEM_VECTOR_TRAITS_INVERSE_OF_MODULUS_MOD_MONTGOMERY_R;
  int32_t
  k_times_modulus = (int32_t)(int16_t)k * (int32_t)LIBCRUX_ML_KEM_VECTOR_TRAITS_FIELD_MODULUS;
  int16_t c = (int16_t)(k_times_modulus >> (uint32_t)MONTGOMERY_SHIFT);
  int16_t value_high = (int16_t)(value >> (uint32_t)MONTGOMERY_SHIFT);
  return value_high - c;
}

static inline int16_t montgomery_multiply_fe_by_fer(int16_t fe, int16_t fer)
{
  return montgomery_reduce_element((int32_t)fe * (int32_t)fer);
}

static inline libcrux_ml_kem_vector_PortableVector
montgomery_multiply_by_constant(libcrux_ml_kem_vector_PortableVector v, int16_t c)
{
  for (size_t i = (size_t)0U; i < LIBCRUX_ML_KEM_VECTOR_TRAITS_FIELD_ELEMENTS_IN_VECTOR; i++)
  {
    size_t i0 = i;
    int16_t uu____0 = montgomery_multiply_fe_by_fer(v.elements[i0], c);
    v.elements[i0] = uu____0;
  }
  return v;
}

static libcrux_ml_kem_vector_PortableVector
montgomery_multiply_by_constant0(libcrux_ml_kem_vector_PortableVector v, int16_t r)
{
  return montgomery_multiply_by_constant(v, r);
}

static uint8_t compress_message_coefficient(uint16_t fe)
{
  int16_t shifted = (int16_t)1664 - (int16_t)fe;
  int16_t mask = shifted >> 15U;
  int16_t shifted_to_positive = mask ^ shifted;
  int16_t shifted_positive_in_range = shifted_to_positive - (int16_t)832;
  return (uint8_t)(shifted_positive_in_range >> 15U & (int16_t)1);
}

static inline libcrux_ml_kem_vector_PortableVector
compress_1(libcrux_ml_kem_vector_PortableVector v)
{
  for (size_t i = (size_t)0U; i < LIBCRUX_ML_KEM_VECTOR_TRAITS_FIELD_ELEMENTS_IN_VECTOR; i++)
  {
    size_t i0 = i;
    uint8_t uu____0 = compress_message_coefficient((uint16_t)v.elements[i0]);
    v.elements[i0] = (int16_t)uu____0;
  }
  return v;
}

libcrux_ml_kem_vector_PortableVector
libcrux_ml_kem_vector___libcrux_ml_kem__vector__traits__Operations_for_libcrux_ml_kem__vector__PortableVector___compress_1(
  libcrux_ml_kem_vector_PortableVector v
)
{
  return compress_1(v);
}

static inline uint32_t get_n_least_significant_bits(uint8_t n, uint32_t value)
{
  return value & ((1U << (uint32_t)n) - 1U);
}

static int16_t compress_ciphertext_coefficient(uint8_t coefficient_bits, uint16_t fe)
{
  uint64_t compressed = (uint64_t)fe << (uint32_t)coefficient_bits;
  compressed = compressed + 1664ULL;
  compressed = compressed * 10321340ULL;
  compressed = compressed >> 35U;
  return (int16_t)get_n_least_significant_bits(coefficient_bits, (uint32_t)compressed);
}

static inline libcrux_ml_kem_vector_PortableVector
ntt_layer_1_step(
  libcrux_ml_kem_vector_PortableVector v,
  int16_t zeta0,
  int16_t zeta1,
  int16_t zeta2,
  int16_t zeta3
)
{
  int16_t t = montgomery_multiply_fe_by_fer(v.elements[2U], zeta0);
  v.elements[2U] = v.elements[0U] - t;
  v.elements[0U] = v.elements[0U] + t;
  int16_t t0 = montgomery_multiply_fe_by_fer(v.elements[3U], zeta0);
  v.elements[3U] = v.elements[1U] - t0;
  v.elements[1U] = v.elements[1U] + t0;
  int16_t t1 = montgomery_multiply_fe_by_fer(v.elements[6U], zeta1);
  v.elements[6U] = v.elements[4U] - t1;
  v.elements[4U] = v.elements[4U] + t1;
  int16_t t2 = montgomery_multiply_fe_by_fer(v.elements[7U], zeta1);
  v.elements[7U] = v.elements[5U] - t2;
  v.elements[5U] = v.elements[5U] + t2;
  int16_t t3 = montgomery_multiply_fe_by_fer(v.elements[(size_t)8U + (size_t)2U], zeta2);
  v.elements[(size_t)8U + (size_t)2U] = v.elements[(size_t)8U + (size_t)0U] - t3;
  v.elements[(size_t)8U + (size_t)0U] = v.elements[(size_t)8U + (size_t)0U] + t3;
  int16_t t4 = montgomery_multiply_fe_by_fer(v.elements[(size_t)8U + (size_t)3U], zeta2);
  v.elements[(size_t)8U + (size_t)3U] = v.elements[(size_t)8U + (size_t)1U] - t4;
  v.elements[(size_t)8U + (size_t)1U] = v.elements[(size_t)8U + (size_t)1U] + t4;
  int16_t t5 = montgomery_multiply_fe_by_fer(v.elements[(size_t)8U + (size_t)6U], zeta3);
  v.elements[(size_t)8U + (size_t)6U] = v.elements[(size_t)8U + (size_t)4U] - t5;
  v.elements[(size_t)8U + (size_t)4U] = v.elements[(size_t)8U + (size_t)4U] + t5;
  int16_t t6 = montgomery_multiply_fe_by_fer(v.elements[(size_t)8U + (size_t)7U], zeta3);
  v.elements[(size_t)8U + (size_t)7U] = v.elements[(size_t)8U + (size_t)5U] - t6;
  v.elements[(size_t)8U + (size_t)5U] = v.elements[(size_t)8U + (size_t)5U] + t6;
  return v;
}

libcrux_ml_kem_vector_PortableVector
libcrux_ml_kem_vector___libcrux_ml_kem__vector__traits__Operations_for_libcrux_ml_kem__vector__PortableVector___ntt_layer_1_step(
  libcrux_ml_kem_vector_PortableVector a,
  int16_t zeta0,
  int16_t zeta1,
  int16_t zeta2,
  int16_t zeta3
)
{
  return ntt_layer_1_step(a, zeta0, zeta1, zeta2, zeta3);
}

static inline libcrux_ml_kem_vector_PortableVector
ntt_layer_2_step(libcrux_ml_kem_vector_PortableVector v, int16_t zeta0, int16_t zeta1)
{
  int16_t t = montgomery_multiply_fe_by_fer(v.elements[4U], zeta0);
  v.elements[4U] = v.elements[0U] - t;
  v.elements[0U] = v.elements[0U] + t;
  int16_t t0 = montgomery_multiply_fe_by_fer(v.elements[5U], zeta0);
  v.elements[5U] = v.elements[1U] - t0;
  v.elements[1U] = v.elements[1U] + t0;
  int16_t t1 = montgomery_multiply_fe_by_fer(v.elements[6U], zeta0);
  v.elements[6U] = v.elements[2U] - t1;
  v.elements[2U] = v.elements[2U] + t1;
  int16_t t2 = montgomery_multiply_fe_by_fer(v.elements[7U], zeta0);
  v.elements[7U] = v.elements[3U] - t2;
  v.elements[3U] = v.elements[3U] + t2;
  int16_t t3 = montgomery_multiply_fe_by_fer(v.elements[(size_t)8U + (size_t)4U], zeta1);
  v.elements[(size_t)8U + (size_t)4U] = v.elements[(size_t)8U + (size_t)0U] - t3;
  v.elements[(size_t)8U + (size_t)0U] = v.elements[(size_t)8U + (size_t)0U] + t3;
  int16_t t4 = montgomery_multiply_fe_by_fer(v.elements[(size_t)8U + (size_t)5U], zeta1);
  v.elements[(size_t)8U + (size_t)5U] = v.elements[(size_t)8U + (size_t)1U] - t4;
  v.elements[(size_t)8U + (size_t)1U] = v.elements[(size_t)8U + (size_t)1U] + t4;
  int16_t t5 = montgomery_multiply_fe_by_fer(v.elements[(size_t)8U + (size_t)6U], zeta1);
  v.elements[(size_t)8U + (size_t)6U] = v.elements[(size_t)8U + (size_t)2U] - t5;
  v.elements[(size_t)8U + (size_t)2U] = v.elements[(size_t)8U + (size_t)2U] + t5;
  int16_t t6 = montgomery_multiply_fe_by_fer(v.elements[(size_t)8U + (size_t)7U], zeta1);
  v.elements[(size_t)8U + (size_t)7U] = v.elements[(size_t)8U + (size_t)3U] - t6;
  v.elements[(size_t)8U + (size_t)3U] = v.elements[(size_t)8U + (size_t)3U] + t6;
  return v;
}

libcrux_ml_kem_vector_PortableVector
libcrux_ml_kem_vector___libcrux_ml_kem__vector__traits__Operations_for_libcrux_ml_kem__vector__PortableVector___ntt_layer_2_step(
  libcrux_ml_kem_vector_PortableVector a,
  int16_t zeta0,
  int16_t zeta1
)
{
  return ntt_layer_2_step(a, zeta0, zeta1);
}

static inline libcrux_ml_kem_vector_PortableVector
ntt_layer_3_step(libcrux_ml_kem_vector_PortableVector v, int16_t zeta)
{
  int16_t t = montgomery_multiply_fe_by_fer(v.elements[8U], zeta);
  v.elements[8U] = v.elements[0U] - t;
  v.elements[0U] = v.elements[0U] + t;
  int16_t t0 = montgomery_multiply_fe_by_fer(v.elements[9U], zeta);
  v.elements[9U] = v.elements[1U] - t0;
  v.elements[1U] = v.elements[1U] + t0;
  int16_t t1 = montgomery_multiply_fe_by_fer(v.elements[10U], zeta);
  v.elements[10U] = v.elements[2U] - t1;
  v.elements[2U] = v.elements[2U] + t1;
  int16_t t2 = montgomery_multiply_fe_by_fer(v.elements[11U], zeta);
  v.elements[11U] = v.elements[3U] - t2;
  v.elements[3U] = v.elements[3U] + t2;
  int16_t t3 = montgomery_multiply_fe_by_fer(v.elements[12U], zeta);
  v.elements[12U] = v.elements[4U] - t3;
  v.elements[4U] = v.elements[4U] + t3;
  int16_t t4 = montgomery_multiply_fe_by_fer(v.elements[13U], zeta);
  v.elements[13U] = v.elements[5U] - t4;
  v.elements[5U] = v.elements[5U] + t4;
  int16_t t5 = montgomery_multiply_fe_by_fer(v.elements[14U], zeta);
  v.elements[14U] = v.elements[6U] - t5;
  v.elements[6U] = v.elements[6U] + t5;
  int16_t t6 = montgomery_multiply_fe_by_fer(v.elements[15U], zeta);
  v.elements[15U] = v.elements[7U] - t6;
  v.elements[7U] = v.elements[7U] + t6;
  return v;
}

libcrux_ml_kem_vector_PortableVector
libcrux_ml_kem_vector___libcrux_ml_kem__vector__traits__Operations_for_libcrux_ml_kem__vector__PortableVector___ntt_layer_3_step(
  libcrux_ml_kem_vector_PortableVector a,
  int16_t zeta
)
{
  return ntt_layer_3_step(a, zeta);
}

static inline libcrux_ml_kem_vector_PortableVector
inv_ntt_layer_1_step(
  libcrux_ml_kem_vector_PortableVector v,
  int16_t zeta0,
  int16_t zeta1,
  int16_t zeta2,
  int16_t zeta3
)
{
  int16_t a_minus_b = v.elements[2U] - v.elements[0U];
  int16_t uu____0 = barrett_reduce_element(v.elements[0U] + v.elements[2U]);
  v.elements[0U] = uu____0;
  int16_t uu____1 = montgomery_multiply_fe_by_fer(a_minus_b, zeta0);
  v.elements[2U] = uu____1;
  int16_t a_minus_b0 = v.elements[3U] - v.elements[1U];
  int16_t uu____2 = barrett_reduce_element(v.elements[1U] + v.elements[3U]);
  v.elements[1U] = uu____2;
  int16_t uu____3 = montgomery_multiply_fe_by_fer(a_minus_b0, zeta0);
  v.elements[3U] = uu____3;
  int16_t a_minus_b1 = v.elements[6U] - v.elements[4U];
  int16_t uu____4 = barrett_reduce_element(v.elements[4U] + v.elements[6U]);
  v.elements[4U] = uu____4;
  int16_t uu____5 = montgomery_multiply_fe_by_fer(a_minus_b1, zeta1);
  v.elements[6U] = uu____5;
  int16_t a_minus_b2 = v.elements[7U] - v.elements[5U];
  int16_t uu____6 = barrett_reduce_element(v.elements[5U] + v.elements[7U]);
  v.elements[5U] = uu____6;
  int16_t uu____7 = montgomery_multiply_fe_by_fer(a_minus_b2, zeta1);
  v.elements[7U] = uu____7;
  int16_t a_minus_b3 = v.elements[(size_t)8U + (size_t)2U] - v.elements[(size_t)8U + (size_t)0U];
  int16_t
  uu____8 =
    barrett_reduce_element(v.elements[(size_t)8U
      + (size_t)0U]
      + v.elements[(size_t)8U + (size_t)2U]);
  v.elements[(size_t)8U + (size_t)0U] = uu____8;
  int16_t uu____9 = montgomery_multiply_fe_by_fer(a_minus_b3, zeta2);
  v.elements[(size_t)8U + (size_t)2U] = uu____9;
  int16_t a_minus_b4 = v.elements[(size_t)8U + (size_t)3U] - v.elements[(size_t)8U + (size_t)1U];
  int16_t
  uu____10 =
    barrett_reduce_element(v.elements[(size_t)8U
      + (size_t)1U]
      + v.elements[(size_t)8U + (size_t)3U]);
  v.elements[(size_t)8U + (size_t)1U] = uu____10;
  int16_t uu____11 = montgomery_multiply_fe_by_fer(a_minus_b4, zeta2);
  v.elements[(size_t)8U + (size_t)3U] = uu____11;
  int16_t a_minus_b5 = v.elements[(size_t)8U + (size_t)6U] - v.elements[(size_t)8U + (size_t)4U];
  int16_t
  uu____12 =
    barrett_reduce_element(v.elements[(size_t)8U
      + (size_t)4U]
      + v.elements[(size_t)8U + (size_t)6U]);
  v.elements[(size_t)8U + (size_t)4U] = uu____12;
  int16_t uu____13 = montgomery_multiply_fe_by_fer(a_minus_b5, zeta3);
  v.elements[(size_t)8U + (size_t)6U] = uu____13;
  int16_t a_minus_b6 = v.elements[(size_t)8U + (size_t)7U] - v.elements[(size_t)8U + (size_t)5U];
  int16_t
  uu____14 =
    barrett_reduce_element(v.elements[(size_t)8U
      + (size_t)5U]
      + v.elements[(size_t)8U + (size_t)7U]);
  v.elements[(size_t)8U + (size_t)5U] = uu____14;
  int16_t uu____15 = montgomery_multiply_fe_by_fer(a_minus_b6, zeta3);
  v.elements[(size_t)8U + (size_t)7U] = uu____15;
  return v;
}

libcrux_ml_kem_vector_PortableVector
libcrux_ml_kem_vector___libcrux_ml_kem__vector__traits__Operations_for_libcrux_ml_kem__vector__PortableVector___inv_ntt_layer_1_step(
  libcrux_ml_kem_vector_PortableVector a,
  int16_t zeta0,
  int16_t zeta1,
  int16_t zeta2,
  int16_t zeta3
)
{
  return inv_ntt_layer_1_step(a, zeta0, zeta1, zeta2, zeta3);
}

static inline libcrux_ml_kem_vector_PortableVector
inv_ntt_layer_2_step(libcrux_ml_kem_vector_PortableVector v, int16_t zeta0, int16_t zeta1)
{
  int16_t a_minus_b = v.elements[4U] - v.elements[0U];
  v.elements[0U] = v.elements[0U] + v.elements[4U];
  int16_t uu____0 = montgomery_multiply_fe_by_fer(a_minus_b, zeta0);
  v.elements[4U] = uu____0;
  int16_t a_minus_b0 = v.elements[5U] - v.elements[1U];
  v.elements[1U] = v.elements[1U] + v.elements[5U];
  int16_t uu____1 = montgomery_multiply_fe_by_fer(a_minus_b0, zeta0);
  v.elements[5U] = uu____1;
  int16_t a_minus_b1 = v.elements[6U] - v.elements[2U];
  v.elements[2U] = v.elements[2U] + v.elements[6U];
  int16_t uu____2 = montgomery_multiply_fe_by_fer(a_minus_b1, zeta0);
  v.elements[6U] = uu____2;
  int16_t a_minus_b2 = v.elements[7U] - v.elements[3U];
  v.elements[3U] = v.elements[3U] + v.elements[7U];
  int16_t uu____3 = montgomery_multiply_fe_by_fer(a_minus_b2, zeta0);
  v.elements[7U] = uu____3;
  int16_t a_minus_b3 = v.elements[(size_t)8U + (size_t)4U] - v.elements[(size_t)8U + (size_t)0U];
  v.elements[(size_t)8U + (size_t)0U] =
    v.elements[(size_t)8U
    + (size_t)0U]
    + v.elements[(size_t)8U + (size_t)4U];
  int16_t uu____4 = montgomery_multiply_fe_by_fer(a_minus_b3, zeta1);
  v.elements[(size_t)8U + (size_t)4U] = uu____4;
  int16_t a_minus_b4 = v.elements[(size_t)8U + (size_t)5U] - v.elements[(size_t)8U + (size_t)1U];
  v.elements[(size_t)8U + (size_t)1U] =
    v.elements[(size_t)8U
    + (size_t)1U]
    + v.elements[(size_t)8U + (size_t)5U];
  int16_t uu____5 = montgomery_multiply_fe_by_fer(a_minus_b4, zeta1);
  v.elements[(size_t)8U + (size_t)5U] = uu____5;
  int16_t a_minus_b5 = v.elements[(size_t)8U + (size_t)6U] - v.elements[(size_t)8U + (size_t)2U];
  v.elements[(size_t)8U + (size_t)2U] =
    v.elements[(size_t)8U
    + (size_t)2U]
    + v.elements[(size_t)8U + (size_t)6U];
  int16_t uu____6 = montgomery_multiply_fe_by_fer(a_minus_b5, zeta1);
  v.elements[(size_t)8U + (size_t)6U] = uu____6;
  int16_t a_minus_b6 = v.elements[(size_t)8U + (size_t)7U] - v.elements[(size_t)8U + (size_t)3U];
  v.elements[(size_t)8U + (size_t)3U] =
    v.elements[(size_t)8U
    + (size_t)3U]
    + v.elements[(size_t)8U + (size_t)7U];
  int16_t uu____7 = montgomery_multiply_fe_by_fer(a_minus_b6, zeta1);
  v.elements[(size_t)8U + (size_t)7U] = uu____7;
  return v;
}

libcrux_ml_kem_vector_PortableVector
libcrux_ml_kem_vector___libcrux_ml_kem__vector__traits__Operations_for_libcrux_ml_kem__vector__PortableVector___inv_ntt_layer_2_step(
  libcrux_ml_kem_vector_PortableVector a,
  int16_t zeta0,
  int16_t zeta1
)
{
  return inv_ntt_layer_2_step(a, zeta0, zeta1);
}

static inline libcrux_ml_kem_vector_PortableVector
inv_ntt_layer_3_step(libcrux_ml_kem_vector_PortableVector v, int16_t zeta)
{
  int16_t a_minus_b = v.elements[8U] - v.elements[0U];
  v.elements[0U] = v.elements[0U] + v.elements[8U];
  int16_t uu____0 = montgomery_multiply_fe_by_fer(a_minus_b, zeta);
  v.elements[8U] = uu____0;
  int16_t a_minus_b0 = v.elements[9U] - v.elements[1U];
  v.elements[1U] = v.elements[1U] + v.elements[9U];
  int16_t uu____1 = montgomery_multiply_fe_by_fer(a_minus_b0, zeta);
  v.elements[9U] = uu____1;
  int16_t a_minus_b1 = v.elements[10U] - v.elements[2U];
  v.elements[2U] = v.elements[2U] + v.elements[10U];
  int16_t uu____2 = montgomery_multiply_fe_by_fer(a_minus_b1, zeta);
  v.elements[10U] = uu____2;
  int16_t a_minus_b2 = v.elements[11U] - v.elements[3U];
  v.elements[3U] = v.elements[3U] + v.elements[11U];
  int16_t uu____3 = montgomery_multiply_fe_by_fer(a_minus_b2, zeta);
  v.elements[11U] = uu____3;
  int16_t a_minus_b3 = v.elements[12U] - v.elements[4U];
  v.elements[4U] = v.elements[4U] + v.elements[12U];
  int16_t uu____4 = montgomery_multiply_fe_by_fer(a_minus_b3, zeta);
  v.elements[12U] = uu____4;
  int16_t a_minus_b4 = v.elements[13U] - v.elements[5U];
  v.elements[5U] = v.elements[5U] + v.elements[13U];
  int16_t uu____5 = montgomery_multiply_fe_by_fer(a_minus_b4, zeta);
  v.elements[13U] = uu____5;
  int16_t a_minus_b5 = v.elements[14U] - v.elements[6U];
  v.elements[6U] = v.elements[6U] + v.elements[14U];
  int16_t uu____6 = montgomery_multiply_fe_by_fer(a_minus_b5, zeta);
  v.elements[14U] = uu____6;
  int16_t a_minus_b6 = v.elements[15U] - v.elements[7U];
  v.elements[7U] = v.elements[7U] + v.elements[15U];
  int16_t uu____7 = montgomery_multiply_fe_by_fer(a_minus_b6, zeta);
  v.elements[15U] = uu____7;
  return v;
}

libcrux_ml_kem_vector_PortableVector
libcrux_ml_kem_vector___libcrux_ml_kem__vector__traits__Operations_for_libcrux_ml_kem__vector__PortableVector___inv_ntt_layer_3_step(
  libcrux_ml_kem_vector_PortableVector a,
  int16_t zeta
)
{
  return inv_ntt_layer_3_step(a, zeta);
}

typedef struct __int16_t_int16_t_s
{
  int16_t fst;
  int16_t snd;
}
__int16_t_int16_t;

static inline __int16_t_int16_t
ntt_multiply_binomials(__int16_t_int16_t _, __int16_t_int16_t _0, int16_t zeta)
{
  int16_t a0 = _.fst;
  int16_t a1 = _.snd;
  int16_t b0 = _0.fst;
  int16_t b1 = _0.snd;
  int32_t uu____0 = (int32_t)a0 * (int32_t)b0;
  int16_t
  uu____1 =
    montgomery_reduce_element(uu____0
      + (int32_t)montgomery_reduce_element((int32_t)a1 * (int32_t)b1) * (int32_t)zeta);
  return
    (
      (__int16_t_int16_t){
        .fst = uu____1,
        .snd = montgomery_reduce_element((int32_t)a0 * (int32_t)b1 + (int32_t)a1 * (int32_t)b0)
      }
    );
}

static inline libcrux_ml_kem_vector_PortableVector
ntt_multiply(
  libcrux_ml_kem_vector_PortableVector *lhs,
  libcrux_ml_kem_vector_PortableVector *rhs,
  int16_t zeta0,
  int16_t zeta1,
  int16_t zeta2,
  int16_t zeta3
)
{
  libcrux_ml_kem_vector_PortableVector out = zero();
  __int16_t_int16_t lit0;
  lit0.fst = lhs->elements[0U];
  lit0.snd = lhs->elements[1U];
  __int16_t_int16_t lit1;
  lit1.fst = rhs->elements[0U];
  lit1.snd = rhs->elements[1U];
  __int16_t_int16_t product = ntt_multiply_binomials(lit0, lit1, zeta0);
  out.elements[0U] = product.fst;
  out.elements[1U] = product.snd;
  __int16_t_int16_t lit2;
  lit2.fst = lhs->elements[2U];
  lit2.snd = lhs->elements[3U];
  __int16_t_int16_t lit3;
  lit3.fst = rhs->elements[2U];
  lit3.snd = rhs->elements[3U];
  __int16_t_int16_t product0 = ntt_multiply_binomials(lit2, lit3, -zeta0);
  out.elements[2U] = product0.fst;
  out.elements[3U] = product0.snd;
  __int16_t_int16_t lit4;
  lit4.fst = lhs->elements[4U];
  lit4.snd = lhs->elements[5U];
  __int16_t_int16_t lit5;
  lit5.fst = rhs->elements[4U];
  lit5.snd = rhs->elements[5U];
  __int16_t_int16_t product1 = ntt_multiply_binomials(lit4, lit5, zeta1);
  out.elements[4U] = product1.fst;
  out.elements[5U] = product1.snd;
  __int16_t_int16_t lit6;
  lit6.fst = lhs->elements[6U];
  lit6.snd = lhs->elements[7U];
  __int16_t_int16_t lit7;
  lit7.fst = rhs->elements[6U];
  lit7.snd = rhs->elements[7U];
  __int16_t_int16_t product2 = ntt_multiply_binomials(lit6, lit7, -zeta1);
  out.elements[6U] = product2.fst;
  out.elements[7U] = product2.snd;
  __int16_t_int16_t lit8;
  lit8.fst = lhs->elements[(size_t)8U + (size_t)0U];
  lit8.snd = lhs->elements[(size_t)8U + (size_t)1U];
  __int16_t_int16_t lit9;
  lit9.fst = rhs->elements[(size_t)8U + (size_t)0U];
  lit9.snd = rhs->elements[(size_t)8U + (size_t)1U];
  __int16_t_int16_t product3 = ntt_multiply_binomials(lit8, lit9, zeta2);
  out.elements[(size_t)8U + (size_t)0U] = product3.fst;
  out.elements[(size_t)8U + (size_t)1U] = product3.snd;
  __int16_t_int16_t lit10;
  lit10.fst = lhs->elements[(size_t)8U + (size_t)2U];
  lit10.snd = lhs->elements[(size_t)8U + (size_t)3U];
  __int16_t_int16_t lit11;
  lit11.fst = rhs->elements[(size_t)8U + (size_t)2U];
  lit11.snd = rhs->elements[(size_t)8U + (size_t)3U];
  __int16_t_int16_t product4 = ntt_multiply_binomials(lit10, lit11, -zeta2);
  out.elements[(size_t)8U + (size_t)2U] = product4.fst;
  out.elements[(size_t)8U + (size_t)3U] = product4.snd;
  __int16_t_int16_t lit12;
  lit12.fst = lhs->elements[(size_t)8U + (size_t)4U];
  lit12.snd = lhs->elements[(size_t)8U + (size_t)5U];
  __int16_t_int16_t lit13;
  lit13.fst = rhs->elements[(size_t)8U + (size_t)4U];
  lit13.snd = rhs->elements[(size_t)8U + (size_t)5U];
  __int16_t_int16_t product5 = ntt_multiply_binomials(lit12, lit13, zeta3);
  out.elements[(size_t)8U + (size_t)4U] = product5.fst;
  out.elements[(size_t)8U + (size_t)5U] = product5.snd;
  __int16_t_int16_t lit14;
  lit14.fst = lhs->elements[(size_t)8U + (size_t)6U];
  lit14.snd = lhs->elements[(size_t)8U + (size_t)7U];
  __int16_t_int16_t lit;
  lit.fst = rhs->elements[(size_t)8U + (size_t)6U];
  lit.snd = rhs->elements[(size_t)8U + (size_t)7U];
  __int16_t_int16_t product6 = ntt_multiply_binomials(lit14, lit, -zeta3);
  out.elements[(size_t)8U + (size_t)6U] = product6.fst;
  out.elements[(size_t)8U + (size_t)7U] = product6.snd;
  return out;
}

static libcrux_ml_kem_vector_PortableVector
ntt_multiply0(
  libcrux_ml_kem_vector_PortableVector *lhs,
  libcrux_ml_kem_vector_PortableVector *rhs,
  int16_t zeta0,
  int16_t zeta1,
  int16_t zeta2,
  int16_t zeta3
)
{
  return ntt_multiply(lhs, rhs, zeta0, zeta1, zeta2, zeta3);
}

static inline void serialize_1(libcrux_ml_kem_vector_PortableVector v, uint8_t ret[2U])
{
  uint8_t result[2U] = { 0U };
  KRML_MAYBE_FOR8(i,
    (size_t)0U,
    (size_t)8U,
    (size_t)1U,
    size_t i0 = i;
    size_t uu____0 = (size_t)0U;
    result[uu____0] = (uint32_t)result[uu____0] | (uint32_t)(uint8_t)v.elements[i0] << (uint32_t)i0;);
  KRML_MAYBE_FOR8(i,
    (size_t)8U,
    (size_t)16U,
    (size_t)1U,
    size_t i0 = i;
    size_t uu____1 = (size_t)1U;
    result[uu____1] =
      (uint32_t)result[uu____1]
      | (uint32_t)(uint8_t)v.elements[i0] << (uint32_t)(i0 - (size_t)8U););
  memcpy(ret, result, (size_t)2U * sizeof (uint8_t));
}

void
libcrux_ml_kem_vector___libcrux_ml_kem__vector__traits__Operations_for_libcrux_ml_kem__vector__PortableVector___serialize_1(
  libcrux_ml_kem_vector_PortableVector a,
  uint8_t ret[2U]
)
{
  uint8_t ret0[2U];
  serialize_1(a, ret0);
  memcpy(ret, ret0, (size_t)2U * sizeof (uint8_t));
}

static inline libcrux_ml_kem_vector_PortableVector deserialize_1(Eurydice_slice v)
{
  libcrux_ml_kem_vector_PortableVector result = zero();
  KRML_MAYBE_FOR8(i,
    (size_t)0U,
    (size_t)8U,
    (size_t)1U,
    size_t i0 = i;
    uint8_t *uu____0 = &Eurydice_slice_index(v, (size_t)0U, uint8_t, uint8_t *, uint8_t);
    result.elements[i0] = (int16_t)((uint32_t)uu____0[0U] >> (uint32_t)i0 & 1U););
  for (size_t i = (size_t)8U; i < LIBCRUX_ML_KEM_VECTOR_TRAITS_FIELD_ELEMENTS_IN_VECTOR; i++)
  {
    size_t i0 = i;
    uint8_t *uu____1 = &Eurydice_slice_index(v, (size_t)1U, uint8_t, uint8_t *, uint8_t);
    result.elements[i0] = (int16_t)((uint32_t)uu____1[0U] >> (uint32_t)(i0 - (size_t)8U) & 1U);
  }
  return result;
}

libcrux_ml_kem_vector_PortableVector
libcrux_ml_kem_vector___libcrux_ml_kem__vector__traits__Operations_for_libcrux_ml_kem__vector__PortableVector___deserialize_1(
  Eurydice_slice a
)
{
  return deserialize_1(a);
}

static inline void serialize_4(libcrux_ml_kem_vector_PortableVector v, uint8_t ret[8U])
{
  uint8_t result[8U] = { 0U };
  result[0U] = (uint32_t)(uint8_t)v.elements[1U] << 4U | (uint32_t)(uint8_t)v.elements[0U];
  result[1U] = (uint32_t)(uint8_t)v.elements[3U] << 4U | (uint32_t)(uint8_t)v.elements[2U];
  result[2U] = (uint32_t)(uint8_t)v.elements[5U] << 4U | (uint32_t)(uint8_t)v.elements[4U];
  result[3U] = (uint32_t)(uint8_t)v.elements[7U] << 4U | (uint32_t)(uint8_t)v.elements[6U];
  result[4U] =
    (uint32_t)(uint8_t)v.elements[(size_t)8U + (size_t)1U]
    << 4U
    | (uint32_t)(uint8_t)v.elements[(size_t)8U + (size_t)0U];
  result[5U] =
    (uint32_t)(uint8_t)v.elements[(size_t)8U + (size_t)3U]
    << 4U
    | (uint32_t)(uint8_t)v.elements[(size_t)8U + (size_t)2U];
  result[6U] =
    (uint32_t)(uint8_t)v.elements[(size_t)8U + (size_t)5U]
    << 4U
    | (uint32_t)(uint8_t)v.elements[(size_t)8U + (size_t)4U];
  result[7U] =
    (uint32_t)(uint8_t)v.elements[(size_t)8U + (size_t)7U]
    << 4U
    | (uint32_t)(uint8_t)v.elements[(size_t)8U + (size_t)6U];
  memcpy(ret, result, (size_t)8U * sizeof (uint8_t));
}

void
libcrux_ml_kem_vector___libcrux_ml_kem__vector__traits__Operations_for_libcrux_ml_kem__vector__PortableVector___serialize_4(
  libcrux_ml_kem_vector_PortableVector a,
  uint8_t ret[8U]
)
{
  uint8_t ret0[8U];
  serialize_4(a, ret0);
  memcpy(ret, ret0, (size_t)8U * sizeof (uint8_t));
}

static inline libcrux_ml_kem_vector_PortableVector deserialize_4(Eurydice_slice bytes)
{
  libcrux_ml_kem_vector_PortableVector v = zero();
  uint8_t *uu____0 = &Eurydice_slice_index(bytes, (size_t)0U, uint8_t, uint8_t *, uint8_t);
  v.elements[0U] = (int16_t)((uint32_t)uu____0[0U] & 15U);
  uint8_t *uu____1 = &Eurydice_slice_index(bytes, (size_t)0U, uint8_t, uint8_t *, uint8_t);
  v.elements[1U] = (int16_t)((uint32_t)uu____1[0U] >> 4U & 15U);
  uint8_t *uu____2 = &Eurydice_slice_index(bytes, (size_t)1U, uint8_t, uint8_t *, uint8_t);
  v.elements[2U] = (int16_t)((uint32_t)uu____2[0U] & 15U);
  uint8_t *uu____3 = &Eurydice_slice_index(bytes, (size_t)1U, uint8_t, uint8_t *, uint8_t);
  v.elements[3U] = (int16_t)((uint32_t)uu____3[0U] >> 4U & 15U);
  uint8_t *uu____4 = &Eurydice_slice_index(bytes, (size_t)2U, uint8_t, uint8_t *, uint8_t);
  v.elements[4U] = (int16_t)((uint32_t)uu____4[0U] & 15U);
  uint8_t *uu____5 = &Eurydice_slice_index(bytes, (size_t)2U, uint8_t, uint8_t *, uint8_t);
  v.elements[5U] = (int16_t)((uint32_t)uu____5[0U] >> 4U & 15U);
  uint8_t *uu____6 = &Eurydice_slice_index(bytes, (size_t)3U, uint8_t, uint8_t *, uint8_t);
  v.elements[6U] = (int16_t)((uint32_t)uu____6[0U] & 15U);
  uint8_t *uu____7 = &Eurydice_slice_index(bytes, (size_t)3U, uint8_t, uint8_t *, uint8_t);
  v.elements[7U] = (int16_t)((uint32_t)uu____7[0U] >> 4U & 15U);
  uint8_t *uu____8 = &Eurydice_slice_index(bytes, (size_t)4U, uint8_t, uint8_t *, uint8_t);
  v.elements[8U] = (int16_t)((uint32_t)uu____8[0U] & 15U);
  uint8_t *uu____9 = &Eurydice_slice_index(bytes, (size_t)4U, uint8_t, uint8_t *, uint8_t);
  v.elements[9U] = (int16_t)((uint32_t)uu____9[0U] >> 4U & 15U);
  uint8_t *uu____10 = &Eurydice_slice_index(bytes, (size_t)5U, uint8_t, uint8_t *, uint8_t);
  v.elements[10U] = (int16_t)((uint32_t)uu____10[0U] & 15U);
  uint8_t *uu____11 = &Eurydice_slice_index(bytes, (size_t)5U, uint8_t, uint8_t *, uint8_t);
  v.elements[11U] = (int16_t)((uint32_t)uu____11[0U] >> 4U & 15U);
  uint8_t *uu____12 = &Eurydice_slice_index(bytes, (size_t)6U, uint8_t, uint8_t *, uint8_t);
  v.elements[12U] = (int16_t)((uint32_t)uu____12[0U] & 15U);
  uint8_t *uu____13 = &Eurydice_slice_index(bytes, (size_t)6U, uint8_t, uint8_t *, uint8_t);
  v.elements[13U] = (int16_t)((uint32_t)uu____13[0U] >> 4U & 15U);
  uint8_t *uu____14 = &Eurydice_slice_index(bytes, (size_t)7U, uint8_t, uint8_t *, uint8_t);
  v.elements[14U] = (int16_t)((uint32_t)uu____14[0U] & 15U);
  uint8_t *uu____15 = &Eurydice_slice_index(bytes, (size_t)7U, uint8_t, uint8_t *, uint8_t);
  v.elements[15U] = (int16_t)((uint32_t)uu____15[0U] >> 4U & 15U);
  return v;
}

libcrux_ml_kem_vector_PortableVector
libcrux_ml_kem_vector___libcrux_ml_kem__vector__traits__Operations_for_libcrux_ml_kem__vector__PortableVector___deserialize_4(
  Eurydice_slice a
)
{
  return deserialize_4(a);
}

static inline void serialize_5(libcrux_ml_kem_vector_PortableVector v, uint8_t ret[10U])
{
  uint8_t result[10U] = { 0U };
  result[0U] = (uint8_t)((v.elements[1U] & (int16_t)7) << 5U | v.elements[0U]);
  result[1U] =
    (uint8_t)(((v.elements[3U] & (int16_t)1) << 7U | v.elements[2U] << 2U) | v.elements[1U] >> 3U);
  result[2U] = (uint8_t)((v.elements[4U] & (int16_t)15) << 4U | v.elements[3U] >> 1U);
  result[3U] =
    (uint8_t)(((v.elements[6U] & (int16_t)3) << 6U | v.elements[5U] << 1U) | v.elements[4U] >> 4U);
  result[4U] = (uint8_t)(v.elements[7U] << 3U | v.elements[6U] >> 2U);
  result[5U] =
    (uint8_t)((v.elements[(size_t)8U + (size_t)1U] & (int16_t)7)
    << 5U
    | v.elements[(size_t)8U + (size_t)0U]);
  result[6U] =
    (uint8_t)(((v.elements[(size_t)8U + (size_t)3U] & (int16_t)1)
    << 7U
    | v.elements[(size_t)8U + (size_t)2U] << 2U)
    | v.elements[(size_t)8U + (size_t)1U] >> 3U);
  result[7U] =
    (uint8_t)((v.elements[(size_t)8U + (size_t)4U] & (int16_t)15)
    << 4U
    | v.elements[(size_t)8U + (size_t)3U] >> 1U);
  result[8U] =
    (uint8_t)(((v.elements[(size_t)8U + (size_t)6U] & (int16_t)3)
    << 6U
    | v.elements[(size_t)8U + (size_t)5U] << 1U)
    | v.elements[(size_t)8U + (size_t)4U] >> 4U);
  result[9U] =
    (uint8_t)(v.elements[(size_t)8U
    + (size_t)7U]
    << 3U
    | v.elements[(size_t)8U + (size_t)6U] >> 2U);
  memcpy(ret, result, (size_t)10U * sizeof (uint8_t));
}

void
libcrux_ml_kem_vector___libcrux_ml_kem__vector__traits__Operations_for_libcrux_ml_kem__vector__PortableVector___serialize_5(
  libcrux_ml_kem_vector_PortableVector a,
  uint8_t ret[10U]
)
{
  uint8_t ret0[10U];
  serialize_5(a, ret0);
  memcpy(ret, ret0, (size_t)10U * sizeof (uint8_t));
}

static inline libcrux_ml_kem_vector_PortableVector deserialize_5(Eurydice_slice bytes)
{
  libcrux_ml_kem_vector_PortableVector v = zero();
  uint8_t *uu____0 = &Eurydice_slice_index(bytes, (size_t)0U, uint8_t, uint8_t *, uint8_t);
  v.elements[0U] = (int16_t)((uint32_t)uu____0[0U] & 31U);
  uint8_t
  uu____1 =
    ((uint32_t)Eurydice_slice_index(bytes, (size_t)1U, uint8_t, uint8_t *, uint8_t) & 3U)
    << 3U;
  uint8_t *uu____2 = &Eurydice_slice_index(bytes, (size_t)0U, uint8_t, uint8_t *, uint8_t);
  v.elements[1U] = (int16_t)((uint32_t)uu____1 | (uint32_t)uu____2[0U] >> 5U);
  uint8_t *uu____3 = &Eurydice_slice_index(bytes, (size_t)1U, uint8_t, uint8_t *, uint8_t);
  v.elements[2U] = (int16_t)((uint32_t)uu____3[0U] >> 2U & 31U);
  uint8_t
  uu____4 =
    ((uint32_t)Eurydice_slice_index(bytes, (size_t)2U, uint8_t, uint8_t *, uint8_t) & 15U)
    << 1U;
  uint8_t *uu____5 = &Eurydice_slice_index(bytes, (size_t)1U, uint8_t, uint8_t *, uint8_t);
  v.elements[3U] = (int16_t)((uint32_t)uu____4 | (uint32_t)uu____5[0U] >> 7U);
  uint8_t
  uu____6 =
    ((uint32_t)Eurydice_slice_index(bytes, (size_t)3U, uint8_t, uint8_t *, uint8_t) & 1U)
    << 4U;
  uint8_t *uu____7 = &Eurydice_slice_index(bytes, (size_t)2U, uint8_t, uint8_t *, uint8_t);
  v.elements[4U] = (int16_t)((uint32_t)uu____6 | (uint32_t)uu____7[0U] >> 4U);
  uint8_t *uu____8 = &Eurydice_slice_index(bytes, (size_t)3U, uint8_t, uint8_t *, uint8_t);
  v.elements[5U] = (int16_t)((uint32_t)uu____8[0U] >> 1U & 31U);
  uint8_t
  uu____9 =
    ((uint32_t)Eurydice_slice_index(bytes, (size_t)4U, uint8_t, uint8_t *, uint8_t) & 7U)
    << 2U;
  uint8_t *uu____10 = &Eurydice_slice_index(bytes, (size_t)3U, uint8_t, uint8_t *, uint8_t);
  v.elements[6U] = (int16_t)((uint32_t)uu____9 | (uint32_t)uu____10[0U] >> 6U);
  uint8_t *uu____11 = &Eurydice_slice_index(bytes, (size_t)4U, uint8_t, uint8_t *, uint8_t);
  v.elements[7U] = (int16_t)((uint32_t)uu____11[0U] >> 3U);
  uint8_t
  *uu____12 = &Eurydice_slice_index(bytes, (size_t)5U + (size_t)0U, uint8_t, uint8_t *, uint8_t);
  v.elements[8U] = (int16_t)((uint32_t)uu____12[0U] & 31U);
  uint8_t
  uu____13 =
    ((uint32_t)Eurydice_slice_index(bytes, (size_t)5U + (size_t)1U, uint8_t, uint8_t *, uint8_t)
    & 3U)
    << 3U;
  uint8_t
  *uu____14 = &Eurydice_slice_index(bytes, (size_t)5U + (size_t)0U, uint8_t, uint8_t *, uint8_t);
  v.elements[9U] = (int16_t)((uint32_t)uu____13 | (uint32_t)uu____14[0U] >> 5U);
  uint8_t
  *uu____15 = &Eurydice_slice_index(bytes, (size_t)5U + (size_t)1U, uint8_t, uint8_t *, uint8_t);
  v.elements[10U] = (int16_t)((uint32_t)uu____15[0U] >> 2U & 31U);
  uint8_t
  uu____16 =
    ((uint32_t)Eurydice_slice_index(bytes, (size_t)5U + (size_t)2U, uint8_t, uint8_t *, uint8_t)
    & 15U)
    << 1U;
  uint8_t
  *uu____17 = &Eurydice_slice_index(bytes, (size_t)5U + (size_t)1U, uint8_t, uint8_t *, uint8_t);
  v.elements[11U] = (int16_t)((uint32_t)uu____16 | (uint32_t)uu____17[0U] >> 7U);
  uint8_t
  uu____18 =
    ((uint32_t)Eurydice_slice_index(bytes, (size_t)5U + (size_t)3U, uint8_t, uint8_t *, uint8_t)
    & 1U)
    << 4U;
  uint8_t
  *uu____19 = &Eurydice_slice_index(bytes, (size_t)5U + (size_t)2U, uint8_t, uint8_t *, uint8_t);
  v.elements[12U] = (int16_t)((uint32_t)uu____18 | (uint32_t)uu____19[0U] >> 4U);
  uint8_t
  *uu____20 = &Eurydice_slice_index(bytes, (size_t)5U + (size_t)3U, uint8_t, uint8_t *, uint8_t);
  v.elements[13U] = (int16_t)((uint32_t)uu____20[0U] >> 1U & 31U);
  uint8_t
  uu____21 =
    ((uint32_t)Eurydice_slice_index(bytes, (size_t)5U + (size_t)4U, uint8_t, uint8_t *, uint8_t)
    & 7U)
    << 2U;
  uint8_t
  *uu____22 = &Eurydice_slice_index(bytes, (size_t)5U + (size_t)3U, uint8_t, uint8_t *, uint8_t);
  v.elements[14U] = (int16_t)((uint32_t)uu____21 | (uint32_t)uu____22[0U] >> 6U);
  uint8_t
  *uu____23 = &Eurydice_slice_index(bytes, (size_t)5U + (size_t)4U, uint8_t, uint8_t *, uint8_t);
  v.elements[15U] = (int16_t)((uint32_t)uu____23[0U] >> 3U);
  return v;
}

libcrux_ml_kem_vector_PortableVector
libcrux_ml_kem_vector___libcrux_ml_kem__vector__traits__Operations_for_libcrux_ml_kem__vector__PortableVector___deserialize_5(
  Eurydice_slice a
)
{
  return deserialize_5(a);
}

static inline void serialize_10(libcrux_ml_kem_vector_PortableVector v, uint8_t ret[20U])
{
  uint8_t result[20U] = { 0U };
  result[0U] = (uint8_t)(v.elements[0U] & (int16_t)255);
  result[1U] =
    (uint32_t)(uint8_t)(v.elements[1U] & (int16_t)63)
    << 2U
    | (uint32_t)(uint8_t)(v.elements[0U] >> 8U & (int16_t)3);
  result[2U] =
    (uint32_t)(uint8_t)(v.elements[2U] & (int16_t)15)
    << 4U
    | (uint32_t)(uint8_t)(v.elements[1U] >> 6U & (int16_t)15);
  result[3U] =
    (uint32_t)(uint8_t)(v.elements[3U] & (int16_t)3)
    << 6U
    | (uint32_t)(uint8_t)(v.elements[2U] >> 4U & (int16_t)63);
  result[4U] = (uint8_t)(v.elements[3U] >> 2U & (int16_t)255);
  result[5U] = (uint8_t)(v.elements[4U] & (int16_t)255);
  result[6U] =
    (uint32_t)(uint8_t)(v.elements[5U] & (int16_t)63)
    << 2U
    | (uint32_t)(uint8_t)(v.elements[4U] >> 8U & (int16_t)3);
  result[7U] =
    (uint32_t)(uint8_t)(v.elements[6U] & (int16_t)15)
    << 4U
    | (uint32_t)(uint8_t)(v.elements[5U] >> 6U & (int16_t)15);
  result[8U] =
    (uint32_t)(uint8_t)(v.elements[7U] & (int16_t)3)
    << 6U
    | (uint32_t)(uint8_t)(v.elements[6U] >> 4U & (int16_t)63);
  result[9U] = (uint8_t)(v.elements[7U] >> 2U & (int16_t)255);
  result[10U] = (uint8_t)(v.elements[(size_t)8U + (size_t)0U] & (int16_t)255);
  result[11U] =
    (uint32_t)(uint8_t)(v.elements[(size_t)8U + (size_t)1U] & (int16_t)63)
    << 2U
    | (uint32_t)(uint8_t)(v.elements[(size_t)8U + (size_t)0U] >> 8U & (int16_t)3);
  result[12U] =
    (uint32_t)(uint8_t)(v.elements[(size_t)8U + (size_t)2U] & (int16_t)15)
    << 4U
    | (uint32_t)(uint8_t)(v.elements[(size_t)8U + (size_t)1U] >> 6U & (int16_t)15);
  result[13U] =
    (uint32_t)(uint8_t)(v.elements[(size_t)8U + (size_t)3U] & (int16_t)3)
    << 6U
    | (uint32_t)(uint8_t)(v.elements[(size_t)8U + (size_t)2U] >> 4U & (int16_t)63);
  result[14U] = (uint8_t)(v.elements[(size_t)8U + (size_t)3U] >> 2U & (int16_t)255);
  result[15U] = (uint8_t)(v.elements[(size_t)8U + (size_t)4U] & (int16_t)255);
  result[16U] =
    (uint32_t)(uint8_t)(v.elements[(size_t)8U + (size_t)5U] & (int16_t)63)
    << 2U
    | (uint32_t)(uint8_t)(v.elements[(size_t)8U + (size_t)4U] >> 8U & (int16_t)3);
  result[17U] =
    (uint32_t)(uint8_t)(v.elements[(size_t)8U + (size_t)6U] & (int16_t)15)
    << 4U
    | (uint32_t)(uint8_t)(v.elements[(size_t)8U + (size_t)5U] >> 6U & (int16_t)15);
  result[18U] =
    (uint32_t)(uint8_t)(v.elements[(size_t)8U + (size_t)7U] & (int16_t)3)
    << 6U
    | (uint32_t)(uint8_t)(v.elements[(size_t)8U + (size_t)6U] >> 4U & (int16_t)63);
  result[19U] = (uint8_t)(v.elements[(size_t)8U + (size_t)7U] >> 2U & (int16_t)255);
  memcpy(ret, result, (size_t)20U * sizeof (uint8_t));
}

void
libcrux_ml_kem_vector___libcrux_ml_kem__vector__traits__Operations_for_libcrux_ml_kem__vector__PortableVector___serialize_10(
  libcrux_ml_kem_vector_PortableVector a,
  uint8_t ret[20U]
)
{
  uint8_t ret0[20U];
  serialize_10(a, ret0);
  memcpy(ret, ret0, (size_t)20U * sizeof (uint8_t));
}

static inline libcrux_ml_kem_vector_PortableVector deserialize_10(Eurydice_slice bytes)
{
  libcrux_ml_kem_vector_PortableVector result = zero();
  int16_t
  uu____0 =
    ((int16_t)Eurydice_slice_index(bytes, (size_t)1U, uint8_t, uint8_t *, uint8_t) & (int16_t)3)
    << 8U;
  uint8_t *uu____1 = &Eurydice_slice_index(bytes, (size_t)0U, uint8_t, uint8_t *, uint8_t);
  result.elements[0U] = uu____0 | ((int16_t)uu____1[0U] & (int16_t)255);
  int16_t
  uu____2 =
    ((int16_t)Eurydice_slice_index(bytes, (size_t)2U, uint8_t, uint8_t *, uint8_t) & (int16_t)15)
    << 6U;
  uint8_t *uu____3 = &Eurydice_slice_index(bytes, (size_t)1U, uint8_t, uint8_t *, uint8_t);
  result.elements[1U] = uu____2 | (int16_t)uu____3[0U] >> 2U;
  int16_t
  uu____4 =
    ((int16_t)Eurydice_slice_index(bytes, (size_t)3U, uint8_t, uint8_t *, uint8_t) & (int16_t)63)
    << 4U;
  uint8_t *uu____5 = &Eurydice_slice_index(bytes, (size_t)2U, uint8_t, uint8_t *, uint8_t);
  result.elements[2U] = uu____4 | (int16_t)uu____5[0U] >> 4U;
  int16_t
  uu____6 = (int16_t)Eurydice_slice_index(bytes, (size_t)4U, uint8_t, uint8_t *, uint8_t) << 2U;
  uint8_t *uu____7 = &Eurydice_slice_index(bytes, (size_t)3U, uint8_t, uint8_t *, uint8_t);
  result.elements[3U] = uu____6 | (int16_t)uu____7[0U] >> 6U;
  int16_t
  uu____8 =
    ((int16_t)Eurydice_slice_index(bytes, (size_t)6U, uint8_t, uint8_t *, uint8_t) & (int16_t)3)
    << 8U;
  uint8_t *uu____9 = &Eurydice_slice_index(bytes, (size_t)5U, uint8_t, uint8_t *, uint8_t);
  result.elements[4U] = uu____8 | ((int16_t)uu____9[0U] & (int16_t)255);
  int16_t
  uu____10 =
    ((int16_t)Eurydice_slice_index(bytes, (size_t)7U, uint8_t, uint8_t *, uint8_t) & (int16_t)15)
    << 6U;
  uint8_t *uu____11 = &Eurydice_slice_index(bytes, (size_t)6U, uint8_t, uint8_t *, uint8_t);
  result.elements[5U] = uu____10 | (int16_t)uu____11[0U] >> 2U;
  int16_t
  uu____12 =
    ((int16_t)Eurydice_slice_index(bytes, (size_t)8U, uint8_t, uint8_t *, uint8_t) & (int16_t)63)
    << 4U;
  uint8_t *uu____13 = &Eurydice_slice_index(bytes, (size_t)7U, uint8_t, uint8_t *, uint8_t);
  result.elements[6U] = uu____12 | (int16_t)uu____13[0U] >> 4U;
  int16_t
  uu____14 = (int16_t)Eurydice_slice_index(bytes, (size_t)9U, uint8_t, uint8_t *, uint8_t) << 2U;
  uint8_t *uu____15 = &Eurydice_slice_index(bytes, (size_t)8U, uint8_t, uint8_t *, uint8_t);
  result.elements[7U] = uu____14 | (int16_t)uu____15[0U] >> 6U;
  int16_t
  uu____16 =
    ((int16_t)Eurydice_slice_index(bytes, (size_t)10U + (size_t)1U, uint8_t, uint8_t *, uint8_t)
    & (int16_t)3)
    << 8U;
  uint8_t
  *uu____17 = &Eurydice_slice_index(bytes, (size_t)10U + (size_t)0U, uint8_t, uint8_t *, uint8_t);
  result.elements[8U] = uu____16 | ((int16_t)uu____17[0U] & (int16_t)255);
  int16_t
  uu____18 =
    ((int16_t)Eurydice_slice_index(bytes, (size_t)10U + (size_t)2U, uint8_t, uint8_t *, uint8_t)
    & (int16_t)15)
    << 6U;
  uint8_t
  *uu____19 = &Eurydice_slice_index(bytes, (size_t)10U + (size_t)1U, uint8_t, uint8_t *, uint8_t);
  result.elements[9U] = uu____18 | (int16_t)uu____19[0U] >> 2U;
  int16_t
  uu____20 =
    ((int16_t)Eurydice_slice_index(bytes, (size_t)10U + (size_t)3U, uint8_t, uint8_t *, uint8_t)
    & (int16_t)63)
    << 4U;
  uint8_t
  *uu____21 = &Eurydice_slice_index(bytes, (size_t)10U + (size_t)2U, uint8_t, uint8_t *, uint8_t);
  result.elements[10U] = uu____20 | (int16_t)uu____21[0U] >> 4U;
  int16_t
  uu____22 =
    (int16_t)Eurydice_slice_index(bytes, (size_t)10U + (size_t)4U, uint8_t, uint8_t *, uint8_t)
    << 2U;
  uint8_t
  *uu____23 = &Eurydice_slice_index(bytes, (size_t)10U + (size_t)3U, uint8_t, uint8_t *, uint8_t);
  result.elements[11U] = uu____22 | (int16_t)uu____23[0U] >> 6U;
  int16_t
  uu____24 =
    ((int16_t)Eurydice_slice_index(bytes, (size_t)10U + (size_t)6U, uint8_t, uint8_t *, uint8_t)
    & (int16_t)3)
    << 8U;
  uint8_t
  *uu____25 = &Eurydice_slice_index(bytes, (size_t)10U + (size_t)5U, uint8_t, uint8_t *, uint8_t);
  result.elements[12U] = uu____24 | ((int16_t)uu____25[0U] & (int16_t)255);
  int16_t
  uu____26 =
    ((int16_t)Eurydice_slice_index(bytes, (size_t)10U + (size_t)7U, uint8_t, uint8_t *, uint8_t)
    & (int16_t)15)
    << 6U;
  uint8_t
  *uu____27 = &Eurydice_slice_index(bytes, (size_t)10U + (size_t)6U, uint8_t, uint8_t *, uint8_t);
  result.elements[13U] = uu____26 | (int16_t)uu____27[0U] >> 2U;
  int16_t
  uu____28 =
    ((int16_t)Eurydice_slice_index(bytes, (size_t)10U + (size_t)8U, uint8_t, uint8_t *, uint8_t)
    & (int16_t)63)
    << 4U;
  uint8_t
  *uu____29 = &Eurydice_slice_index(bytes, (size_t)10U + (size_t)7U, uint8_t, uint8_t *, uint8_t);
  result.elements[14U] = uu____28 | (int16_t)uu____29[0U] >> 4U;
  int16_t
  uu____30 =
    (int16_t)Eurydice_slice_index(bytes, (size_t)10U + (size_t)9U, uint8_t, uint8_t *, uint8_t)
    << 2U;
  uint8_t
  *uu____31 = &Eurydice_slice_index(bytes, (size_t)10U + (size_t)8U, uint8_t, uint8_t *, uint8_t);
  result.elements[15U] = uu____30 | (int16_t)uu____31[0U] >> 6U;
  return result;
}

libcrux_ml_kem_vector_PortableVector
libcrux_ml_kem_vector___libcrux_ml_kem__vector__traits__Operations_for_libcrux_ml_kem__vector__PortableVector___deserialize_10(
  Eurydice_slice a
)
{
  return deserialize_10(a);
}

static inline void serialize_11(libcrux_ml_kem_vector_PortableVector v, uint8_t ret[22U])
{
  uint8_t result[22U] = { 0U };
  result[0U] = (uint8_t)v.elements[0U];
  result[1U] =
    (uint32_t)(uint8_t)(v.elements[1U] & (int16_t)31)
    << 3U
    | (uint32_t)(uint8_t)(v.elements[0U] >> 8U);
  result[2U] =
    (uint32_t)(uint8_t)(v.elements[2U] & (int16_t)3)
    << 6U
    | (uint32_t)(uint8_t)(v.elements[1U] >> 5U);
  result[3U] = (uint8_t)(v.elements[2U] >> 2U & (int16_t)255);
  result[4U] =
    (uint32_t)(uint8_t)(v.elements[3U] & (int16_t)127)
    << 1U
    | (uint32_t)(uint8_t)(v.elements[2U] >> 10U);
  result[5U] =
    (uint32_t)(uint8_t)(v.elements[4U] & (int16_t)15)
    << 4U
    | (uint32_t)(uint8_t)(v.elements[3U] >> 7U);
  result[6U] =
    (uint32_t)(uint8_t)(v.elements[5U] & (int16_t)1)
    << 7U
    | (uint32_t)(uint8_t)(v.elements[4U] >> 4U);
  result[7U] = (uint8_t)(v.elements[5U] >> 1U & (int16_t)255);
  result[8U] =
    (uint32_t)(uint8_t)(v.elements[6U] & (int16_t)63)
    << 2U
    | (uint32_t)(uint8_t)(v.elements[5U] >> 9U);
  result[9U] =
    (uint32_t)(uint8_t)(v.elements[7U] & (int16_t)7)
    << 5U
    | (uint32_t)(uint8_t)(v.elements[6U] >> 6U);
  result[10U] = (uint8_t)(v.elements[7U] >> 3U);
  result[11U] = (uint8_t)v.elements[(size_t)8U + (size_t)0U];
  result[12U] =
    (uint32_t)(uint8_t)(v.elements[(size_t)8U + (size_t)1U] & (int16_t)31)
    << 3U
    | (uint32_t)(uint8_t)(v.elements[(size_t)8U + (size_t)0U] >> 8U);
  result[13U] =
    (uint32_t)(uint8_t)(v.elements[(size_t)8U + (size_t)2U] & (int16_t)3)
    << 6U
    | (uint32_t)(uint8_t)(v.elements[(size_t)8U + (size_t)1U] >> 5U);
  result[14U] = (uint8_t)(v.elements[(size_t)8U + (size_t)2U] >> 2U & (int16_t)255);
  result[15U] =
    (uint32_t)(uint8_t)(v.elements[(size_t)8U + (size_t)3U] & (int16_t)127)
    << 1U
    | (uint32_t)(uint8_t)(v.elements[(size_t)8U + (size_t)2U] >> 10U);
  result[16U] =
    (uint32_t)(uint8_t)(v.elements[(size_t)8U + (size_t)4U] & (int16_t)15)
    << 4U
    | (uint32_t)(uint8_t)(v.elements[(size_t)8U + (size_t)3U] >> 7U);
  result[17U] =
    (uint32_t)(uint8_t)(v.elements[(size_t)8U + (size_t)5U] & (int16_t)1)
    << 7U
    | (uint32_t)(uint8_t)(v.elements[(size_t)8U + (size_t)4U] >> 4U);
  result[18U] = (uint8_t)(v.elements[(size_t)8U + (size_t)5U] >> 1U & (int16_t)255);
  result[19U] =
    (uint32_t)(uint8_t)(v.elements[(size_t)8U + (size_t)6U] & (int16_t)63)
    << 2U
    | (uint32_t)(uint8_t)(v.elements[(size_t)8U + (size_t)5U] >> 9U);
  result[20U] =
    (uint32_t)(uint8_t)(v.elements[(size_t)8U + (size_t)7U] & (int16_t)7)
    << 5U
    | (uint32_t)(uint8_t)(v.elements[(size_t)8U + (size_t)6U] >> 6U);
  result[21U] = (uint8_t)(v.elements[(size_t)8U + (size_t)7U] >> 3U);
  memcpy(ret, result, (size_t)22U * sizeof (uint8_t));
}

void
libcrux_ml_kem_vector___libcrux_ml_kem__vector__traits__Operations_for_libcrux_ml_kem__vector__PortableVector___serialize_11(
  libcrux_ml_kem_vector_PortableVector a,
  uint8_t ret[22U]
)
{
  uint8_t ret0[22U];
  serialize_11(a, ret0);
  memcpy(ret, ret0, (size_t)22U * sizeof (uint8_t));
}

static inline libcrux_ml_kem_vector_PortableVector deserialize_11(Eurydice_slice bytes)
{
  libcrux_ml_kem_vector_PortableVector result = zero();
  int16_t
  uu____0 =
    ((int16_t)Eurydice_slice_index(bytes, (size_t)1U, uint8_t, uint8_t *, uint8_t) & (int16_t)7)
    << 8U;
  uint8_t *uu____1 = &Eurydice_slice_index(bytes, (size_t)0U, uint8_t, uint8_t *, uint8_t);
  result.elements[0U] = uu____0 | (int16_t)uu____1[0U];
  int16_t
  uu____2 =
    ((int16_t)Eurydice_slice_index(bytes, (size_t)2U, uint8_t, uint8_t *, uint8_t) & (int16_t)63)
    << 5U;
  uint8_t *uu____3 = &Eurydice_slice_index(bytes, (size_t)1U, uint8_t, uint8_t *, uint8_t);
  result.elements[1U] = uu____2 | (int16_t)uu____3[0U] >> 3U;
  int16_t
  uu____4 =
    ((int16_t)Eurydice_slice_index(bytes, (size_t)4U, uint8_t, uint8_t *, uint8_t) & (int16_t)1)
    << 10U;
  int16_t
  uu____5 =
    uu____4
    | (int16_t)Eurydice_slice_index(bytes, (size_t)3U, uint8_t, uint8_t *, uint8_t) << 2U;
  uint8_t *uu____6 = &Eurydice_slice_index(bytes, (size_t)2U, uint8_t, uint8_t *, uint8_t);
  result.elements[2U] = uu____5 | (int16_t)uu____6[0U] >> 6U;
  int16_t
  uu____7 =
    ((int16_t)Eurydice_slice_index(bytes, (size_t)5U, uint8_t, uint8_t *, uint8_t) & (int16_t)15)
    << 7U;
  uint8_t *uu____8 = &Eurydice_slice_index(bytes, (size_t)4U, uint8_t, uint8_t *, uint8_t);
  result.elements[3U] = uu____7 | (int16_t)uu____8[0U] >> 1U;
  int16_t
  uu____9 =
    ((int16_t)Eurydice_slice_index(bytes, (size_t)6U, uint8_t, uint8_t *, uint8_t) & (int16_t)127)
    << 4U;
  uint8_t *uu____10 = &Eurydice_slice_index(bytes, (size_t)5U, uint8_t, uint8_t *, uint8_t);
  result.elements[4U] = uu____9 | (int16_t)uu____10[0U] >> 4U;
  int16_t
  uu____11 =
    ((int16_t)Eurydice_slice_index(bytes, (size_t)8U, uint8_t, uint8_t *, uint8_t) & (int16_t)3)
    << 9U;
  int16_t
  uu____12 =
    uu____11
    | (int16_t)Eurydice_slice_index(bytes, (size_t)7U, uint8_t, uint8_t *, uint8_t) << 1U;
  uint8_t *uu____13 = &Eurydice_slice_index(bytes, (size_t)6U, uint8_t, uint8_t *, uint8_t);
  result.elements[5U] = uu____12 | (int16_t)uu____13[0U] >> 7U;
  int16_t
  uu____14 =
    ((int16_t)Eurydice_slice_index(bytes, (size_t)9U, uint8_t, uint8_t *, uint8_t) & (int16_t)31)
    << 6U;
  uint8_t *uu____15 = &Eurydice_slice_index(bytes, (size_t)8U, uint8_t, uint8_t *, uint8_t);
  result.elements[6U] = uu____14 | (int16_t)uu____15[0U] >> 2U;
  int16_t
  uu____16 = (int16_t)Eurydice_slice_index(bytes, (size_t)10U, uint8_t, uint8_t *, uint8_t) << 3U;
  uint8_t *uu____17 = &Eurydice_slice_index(bytes, (size_t)9U, uint8_t, uint8_t *, uint8_t);
  result.elements[7U] = uu____16 | (int16_t)uu____17[0U] >> 5U;
  int16_t
  uu____18 =
    ((int16_t)Eurydice_slice_index(bytes, (size_t)11U + (size_t)1U, uint8_t, uint8_t *, uint8_t)
    & (int16_t)7)
    << 8U;
  uint8_t
  *uu____19 = &Eurydice_slice_index(bytes, (size_t)11U + (size_t)0U, uint8_t, uint8_t *, uint8_t);
  result.elements[8U] = uu____18 | (int16_t)uu____19[0U];
  int16_t
  uu____20 =
    ((int16_t)Eurydice_slice_index(bytes, (size_t)11U + (size_t)2U, uint8_t, uint8_t *, uint8_t)
    & (int16_t)63)
    << 5U;
  uint8_t
  *uu____21 = &Eurydice_slice_index(bytes, (size_t)11U + (size_t)1U, uint8_t, uint8_t *, uint8_t);
  result.elements[9U] = uu____20 | (int16_t)uu____21[0U] >> 3U;
  int16_t
  uu____22 =
    ((int16_t)Eurydice_slice_index(bytes, (size_t)11U + (size_t)4U, uint8_t, uint8_t *, uint8_t)
    & (int16_t)1)
    << 10U;
  int16_t
  uu____23 =
    uu____22
    |
      (int16_t)Eurydice_slice_index(bytes, (size_t)11U + (size_t)3U, uint8_t, uint8_t *, uint8_t)
      << 2U;
  uint8_t
  *uu____24 = &Eurydice_slice_index(bytes, (size_t)11U + (size_t)2U, uint8_t, uint8_t *, uint8_t);
  result.elements[10U] = uu____23 | (int16_t)uu____24[0U] >> 6U;
  int16_t
  uu____25 =
    ((int16_t)Eurydice_slice_index(bytes, (size_t)11U + (size_t)5U, uint8_t, uint8_t *, uint8_t)
    & (int16_t)15)
    << 7U;
  uint8_t
  *uu____26 = &Eurydice_slice_index(bytes, (size_t)11U + (size_t)4U, uint8_t, uint8_t *, uint8_t);
  result.elements[11U] = uu____25 | (int16_t)uu____26[0U] >> 1U;
  int16_t
  uu____27 =
    ((int16_t)Eurydice_slice_index(bytes, (size_t)11U + (size_t)6U, uint8_t, uint8_t *, uint8_t)
    & (int16_t)127)
    << 4U;
  uint8_t
  *uu____28 = &Eurydice_slice_index(bytes, (size_t)11U + (size_t)5U, uint8_t, uint8_t *, uint8_t);
  result.elements[12U] = uu____27 | (int16_t)uu____28[0U] >> 4U;
  int16_t
  uu____29 =
    ((int16_t)Eurydice_slice_index(bytes, (size_t)11U + (size_t)8U, uint8_t, uint8_t *, uint8_t)
    & (int16_t)3)
    << 9U;
  int16_t
  uu____30 =
    uu____29
    |
      (int16_t)Eurydice_slice_index(bytes, (size_t)11U + (size_t)7U, uint8_t, uint8_t *, uint8_t)
      << 1U;
  uint8_t
  *uu____31 = &Eurydice_slice_index(bytes, (size_t)11U + (size_t)6U, uint8_t, uint8_t *, uint8_t);
  result.elements[13U] = uu____30 | (int16_t)uu____31[0U] >> 7U;
  int16_t
  uu____32 =
    ((int16_t)Eurydice_slice_index(bytes, (size_t)11U + (size_t)9U, uint8_t, uint8_t *, uint8_t)
    & (int16_t)31)
    << 6U;
  uint8_t
  *uu____33 = &Eurydice_slice_index(bytes, (size_t)11U + (size_t)8U, uint8_t, uint8_t *, uint8_t);
  result.elements[14U] = uu____32 | (int16_t)uu____33[0U] >> 2U;
  int16_t
  uu____34 =
    (int16_t)Eurydice_slice_index(bytes, (size_t)11U + (size_t)10U, uint8_t, uint8_t *, uint8_t)
    << 3U;
  uint8_t
  *uu____35 = &Eurydice_slice_index(bytes, (size_t)11U + (size_t)9U, uint8_t, uint8_t *, uint8_t);
  result.elements[15U] = uu____34 | (int16_t)uu____35[0U] >> 5U;
  return result;
}

libcrux_ml_kem_vector_PortableVector
libcrux_ml_kem_vector___libcrux_ml_kem__vector__traits__Operations_for_libcrux_ml_kem__vector__PortableVector___deserialize_11(
  Eurydice_slice a
)
{
  return deserialize_11(a);
}

static inline void serialize_12(libcrux_ml_kem_vector_PortableVector v, uint8_t ret[24U])
{
  uint8_t result[24U] = { 0U };
  result[0U] = (uint8_t)(v.elements[0U] & (int16_t)255);
  result[1U] = (uint8_t)(v.elements[0U] >> 8U | (v.elements[1U] & (int16_t)15) << 4U);
  result[2U] = (uint8_t)(v.elements[1U] >> 4U & (int16_t)255);
  result[3U] = (uint8_t)(v.elements[2U] & (int16_t)255);
  result[4U] = (uint8_t)(v.elements[2U] >> 8U | (v.elements[3U] & (int16_t)15) << 4U);
  result[5U] = (uint8_t)(v.elements[3U] >> 4U & (int16_t)255);
  result[6U] = (uint8_t)(v.elements[4U] & (int16_t)255);
  result[7U] = (uint8_t)(v.elements[4U] >> 8U | (v.elements[5U] & (int16_t)15) << 4U);
  result[8U] = (uint8_t)(v.elements[5U] >> 4U & (int16_t)255);
  result[9U] = (uint8_t)(v.elements[6U] & (int16_t)255);
  result[10U] = (uint8_t)(v.elements[6U] >> 8U | (v.elements[7U] & (int16_t)15) << 4U);
  result[11U] = (uint8_t)(v.elements[7U] >> 4U & (int16_t)255);
  result[12U] = (uint8_t)(v.elements[(size_t)8U + (size_t)0U] & (int16_t)255);
  result[13U] =
    (uint8_t)(v.elements[(size_t)8U
    + (size_t)0U]
    >> 8U
    | (v.elements[(size_t)8U + (size_t)1U] & (int16_t)15) << 4U);
  result[14U] = (uint8_t)(v.elements[(size_t)8U + (size_t)1U] >> 4U & (int16_t)255);
  result[15U] = (uint8_t)(v.elements[(size_t)8U + (size_t)2U] & (int16_t)255);
  result[16U] =
    (uint8_t)(v.elements[(size_t)8U
    + (size_t)2U]
    >> 8U
    | (v.elements[(size_t)8U + (size_t)3U] & (int16_t)15) << 4U);
  result[17U] = (uint8_t)(v.elements[(size_t)8U + (size_t)3U] >> 4U & (int16_t)255);
  result[18U] = (uint8_t)(v.elements[(size_t)8U + (size_t)4U] & (int16_t)255);
  result[19U] =
    (uint8_t)(v.elements[(size_t)8U
    + (size_t)4U]
    >> 8U
    | (v.elements[(size_t)8U + (size_t)5U] & (int16_t)15) << 4U);
  result[20U] = (uint8_t)(v.elements[(size_t)8U + (size_t)5U] >> 4U & (int16_t)255);
  result[21U] = (uint8_t)(v.elements[(size_t)8U + (size_t)6U] & (int16_t)255);
  result[22U] =
    (uint8_t)(v.elements[(size_t)8U
    + (size_t)6U]
    >> 8U
    | (v.elements[(size_t)8U + (size_t)7U] & (int16_t)15) << 4U);
  result[23U] = (uint8_t)(v.elements[(size_t)8U + (size_t)7U] >> 4U & (int16_t)255);
  memcpy(ret, result, (size_t)24U * sizeof (uint8_t));
}

void
libcrux_ml_kem_vector___libcrux_ml_kem__vector__traits__Operations_for_libcrux_ml_kem__vector__PortableVector___serialize_12(
  libcrux_ml_kem_vector_PortableVector a,
  uint8_t ret[24U]
)
{
  uint8_t ret0[24U];
  serialize_12(a, ret0);
  memcpy(ret, ret0, (size_t)24U * sizeof (uint8_t));
}

static inline libcrux_ml_kem_vector_PortableVector deserialize_12(Eurydice_slice bytes)
{
  libcrux_ml_kem_vector_PortableVector re = zero();
  int16_t byte0 = (int16_t)Eurydice_slice_index(bytes, (size_t)0U, uint8_t, uint8_t *, uint8_t);
  int16_t byte1 = (int16_t)Eurydice_slice_index(bytes, (size_t)1U, uint8_t, uint8_t *, uint8_t);
  int16_t byte2 = (int16_t)Eurydice_slice_index(bytes, (size_t)2U, uint8_t, uint8_t *, uint8_t);
  int16_t byte3 = (int16_t)Eurydice_slice_index(bytes, (size_t)3U, uint8_t, uint8_t *, uint8_t);
  int16_t byte4 = (int16_t)Eurydice_slice_index(bytes, (size_t)4U, uint8_t, uint8_t *, uint8_t);
  int16_t byte5 = (int16_t)Eurydice_slice_index(bytes, (size_t)5U, uint8_t, uint8_t *, uint8_t);
  int16_t byte6 = (int16_t)Eurydice_slice_index(bytes, (size_t)6U, uint8_t, uint8_t *, uint8_t);
  int16_t byte7 = (int16_t)Eurydice_slice_index(bytes, (size_t)7U, uint8_t, uint8_t *, uint8_t);
  int16_t byte8 = (int16_t)Eurydice_slice_index(bytes, (size_t)8U, uint8_t, uint8_t *, uint8_t);
  int16_t byte9 = (int16_t)Eurydice_slice_index(bytes, (size_t)9U, uint8_t, uint8_t *, uint8_t);
  int16_t
  byte10 = (int16_t)Eurydice_slice_index(bytes, (size_t)10U, uint8_t, uint8_t *, uint8_t);
  int16_t
  byte11 = (int16_t)Eurydice_slice_index(bytes, (size_t)11U, uint8_t, uint8_t *, uint8_t);
  re.elements[0U] = (byte1 & (int16_t)15) << 8U | (byte0 & (int16_t)255);
  re.elements[1U] = byte2 << 4U | (byte1 >> 4U & (int16_t)15);
  re.elements[2U] = (byte4 & (int16_t)15) << 8U | (byte3 & (int16_t)255);
  re.elements[3U] = byte5 << 4U | (byte4 >> 4U & (int16_t)15);
  re.elements[4U] = (byte7 & (int16_t)15) << 8U | (byte6 & (int16_t)255);
  re.elements[5U] = byte8 << 4U | (byte7 >> 4U & (int16_t)15);
  re.elements[6U] = (byte10 & (int16_t)15) << 8U | (byte9 & (int16_t)255);
  re.elements[7U] = byte11 << 4U | (byte10 >> 4U & (int16_t)15);
  int16_t
  byte12 = (int16_t)Eurydice_slice_index(bytes, (size_t)12U, uint8_t, uint8_t *, uint8_t);
  int16_t
  byte13 = (int16_t)Eurydice_slice_index(bytes, (size_t)13U, uint8_t, uint8_t *, uint8_t);
  int16_t
  byte14 = (int16_t)Eurydice_slice_index(bytes, (size_t)14U, uint8_t, uint8_t *, uint8_t);
  int16_t
  byte15 = (int16_t)Eurydice_slice_index(bytes, (size_t)15U, uint8_t, uint8_t *, uint8_t);
  int16_t
  byte16 = (int16_t)Eurydice_slice_index(bytes, (size_t)16U, uint8_t, uint8_t *, uint8_t);
  int16_t
  byte17 = (int16_t)Eurydice_slice_index(bytes, (size_t)17U, uint8_t, uint8_t *, uint8_t);
  int16_t
  byte18 = (int16_t)Eurydice_slice_index(bytes, (size_t)18U, uint8_t, uint8_t *, uint8_t);
  int16_t
  byte19 = (int16_t)Eurydice_slice_index(bytes, (size_t)19U, uint8_t, uint8_t *, uint8_t);
  int16_t
  byte20 = (int16_t)Eurydice_slice_index(bytes, (size_t)20U, uint8_t, uint8_t *, uint8_t);
  int16_t
  byte21 = (int16_t)Eurydice_slice_index(bytes, (size_t)21U, uint8_t, uint8_t *, uint8_t);
  int16_t
  byte22 = (int16_t)Eurydice_slice_index(bytes, (size_t)22U, uint8_t, uint8_t *, uint8_t);
  int16_t
  byte23 = (int16_t)Eurydice_slice_index(bytes, (size_t)23U, uint8_t, uint8_t *, uint8_t);
  re.elements[8U] = (byte13 & (int16_t)15) << 8U | (byte12 & (int16_t)255);
  re.elements[9U] = byte14 << 4U | (byte13 >> 4U & (int16_t)15);
  re.elements[10U] = (byte16 & (int16_t)15) << 8U | (byte15 & (int16_t)255);
  re.elements[11U] = byte17 << 4U | (byte16 >> 4U & (int16_t)15);
  re.elements[12U] = (byte19 & (int16_t)15) << 8U | (byte18 & (int16_t)255);
  re.elements[13U] = byte20 << 4U | (byte19 >> 4U & (int16_t)15);
  re.elements[14U] = (byte22 & (int16_t)15) << 8U | (byte21 & (int16_t)255);
  re.elements[15U] = byte23 << 4U | (byte22 >> 4U & (int16_t)15);
  return re;
}

libcrux_ml_kem_vector_PortableVector
libcrux_ml_kem_vector___libcrux_ml_kem__vector__traits__Operations_for_libcrux_ml_kem__vector__PortableVector___deserialize_12(
  Eurydice_slice a
)
{
  return deserialize_12(a);
}

static inline size_t rej_sample(Eurydice_slice a, Eurydice_slice result)
{
  size_t sampled = (size_t)0U;
  core_slice_iter_Chunks
  iter =
    core_iter_traits_collect___core__iter__traits__collect__IntoIterator_for_I___into_iter(core_slice___Slice_T___chunks(a,
        (size_t)3U,
        uint8_t,
        core_slice_iter_Chunks),
      core_slice_iter_Chunks,
      core_slice_iter_Chunks);
  while (true)
  {
    core_option_Option__Eurydice_slice_uint8_t
    uu____0 =
      core_slice_iter___core__iter__traits__iterator__Iterator_for_core__slice__iter__Chunks__a__T___70__next(&iter,
        uint8_t,
        core_option_Option__Eurydice_slice_uint8_t);
    if (uu____0.tag == core_option_None)
    {
      break;
    }
    else
    {
      Eurydice_slice bytes = uu____0.f0;
      int16_t b1 = (int16_t)Eurydice_slice_index(bytes, (size_t)0U, uint8_t, uint8_t *, uint8_t);
      int16_t b2 = (int16_t)Eurydice_slice_index(bytes, (size_t)1U, uint8_t, uint8_t *, uint8_t);
      int16_t b3 = (int16_t)Eurydice_slice_index(bytes, (size_t)2U, uint8_t, uint8_t *, uint8_t);
      int16_t d1 = (b2 & (int16_t)15) << 8U | b1;
      int16_t d2 = b3 << 4U | b2 >> 4U;
      bool uu____1;
      if (d1 < LIBCRUX_ML_KEM_VECTOR_TRAITS_FIELD_MODULUS)
      {
        uu____1 = sampled < (size_t)16U;
      }
      else
      {
        uu____1 = false;
      }
      if (uu____1)
      {
        int16_t uu____2 = d1;
        Eurydice_slice_index(result, sampled, int16_t, int16_t *, int16_t) = uu____2;
        sampled++;
      }
      bool uu____3;
      if (d2 < LIBCRUX_ML_KEM_VECTOR_TRAITS_FIELD_MODULUS)
      {
        uu____3 = sampled < (size_t)16U;
      }
      else
      {
        uu____3 = false;
      }
      if (uu____3)
      {
        int16_t uu____4 = d2;
        Eurydice_slice_index(result, sampled, int16_t, int16_t *, int16_t) = uu____4;
        sampled++;
      }
    }
  }
  return sampled;
}

size_t
libcrux_ml_kem_vector___libcrux_ml_kem__vector__traits__Operations_for_libcrux_ml_kem__vector__PortableVector___rej_sample(
  Eurydice_slice a,
  Eurydice_slice out
)
{
  return rej_sample(a, out);
}

void
libcrux_ml_kem_polynomial__libcrux_ml_kem__polynomial__PolynomialRingElement_Vector__TraitClause_0___add_to_ring_element__libcrux_ml_kem_vector_PortableVector_2size_t(
  libcrux_ml_kem_polynomial_PolynomialRingElement__libcrux_ml_kem_vector_PortableVector *self,
  libcrux_ml_kem_polynomial_PolynomialRingElement__libcrux_ml_kem_vector_PortableVector *rhs
)
{
  for
  (size_t
    i = (size_t)0U;
    i
    <
      core_slice___Slice_T___len(Eurydice_array_to_slice((size_t)16U,
          self->coefficients,
          libcrux_ml_kem_vector_PortableVector,
          Eurydice_slice),
        libcrux_ml_kem_vector_PortableVector,
        size_t);
    i++)
  {
    size_t i0 = i;
    libcrux_ml_kem_vector_PortableVector
    uu____0 =
      libcrux_ml_kem_vector___libcrux_ml_kem__vector__traits__Operations_for_libcrux_ml_kem__vector__PortableVector___add(self->coefficients[i0],
        &rhs->coefficients[i0]);
    self->coefficients[i0] = uu____0;
  }
}

void
libcrux_ml_kem_polynomial__libcrux_ml_kem__polynomial__PolynomialRingElement_Vector__TraitClause_0___add_to_ring_element__libcrux_ml_kem_vector_PortableVector_4size_t(
  libcrux_ml_kem_polynomial_PolynomialRingElement__libcrux_ml_kem_vector_PortableVector *self,
  libcrux_ml_kem_polynomial_PolynomialRingElement__libcrux_ml_kem_vector_PortableVector *rhs
)
{
  for
  (size_t
    i = (size_t)0U;
    i
    <
      core_slice___Slice_T___len(Eurydice_array_to_slice((size_t)16U,
          self->coefficients,
          libcrux_ml_kem_vector_PortableVector,
          Eurydice_slice),
        libcrux_ml_kem_vector_PortableVector,
        size_t);
    i++)
  {
    size_t i0 = i;
    libcrux_ml_kem_vector_PortableVector
    uu____0 =
      libcrux_ml_kem_vector___libcrux_ml_kem__vector__traits__Operations_for_libcrux_ml_kem__vector__PortableVector___add(self->coefficients[i0],
        &rhs->coefficients[i0]);
    self->coefficients[i0] = uu____0;
  }
}

static libcrux_ml_kem_vector_PortableVector
to_standard_domain__libcrux_ml_kem_vector_PortableVector(
  libcrux_ml_kem_vector_PortableVector v
)
{
  return
    montgomery_multiply_by_constant0(v,
      LIBCRUX_ML_KEM_VECTOR_TRAITS_MONTGOMERY_R_SQUARED_MOD_FIELD_MODULUS);
}

void
libcrux_ml_kem_polynomial__libcrux_ml_kem__polynomial__PolynomialRingElement_Vector__TraitClause_0___add_standard_error_reduce__libcrux_ml_kem_vector_PortableVector(
  libcrux_ml_kem_polynomial_PolynomialRingElement__libcrux_ml_kem_vector_PortableVector *self,
  libcrux_ml_kem_polynomial_PolynomialRingElement__libcrux_ml_kem_vector_PortableVector *error
)
{
  for (size_t i = (size_t)0U; i < LIBCRUX_ML_KEM_POLYNOMIAL_VECTORS_IN_RING_ELEMENT; i++)
  {
    size_t j = i;
    libcrux_ml_kem_vector_PortableVector
    coefficient_normal_form =
      to_standard_domain__libcrux_ml_kem_vector_PortableVector(self->coefficients[j]);
    libcrux_ml_kem_vector_PortableVector
    uu____0 =
      libcrux_ml_kem_vector___libcrux_ml_kem__vector__traits__Operations_for_libcrux_ml_kem__vector__PortableVector___barrett_reduce(libcrux_ml_kem_vector___libcrux_ml_kem__vector__traits__Operations_for_libcrux_ml_kem__vector__PortableVector___add(coefficient_normal_form,
          &error->coefficients[j]));
    self->coefficients[j] = uu____0;
  }
}

static inline libcrux_ml_kem_vector_PortableVector
compress___5int32_t(libcrux_ml_kem_vector_PortableVector v)
{
  for (size_t i = (size_t)0U; i < LIBCRUX_ML_KEM_VECTOR_TRAITS_FIELD_ELEMENTS_IN_VECTOR; i++)
  {
    size_t i0 = i;
    int16_t
    uu____0 = compress_ciphertext_coefficient((uint8_t)(int32_t)5, (uint16_t)v.elements[i0]);
    v.elements[i0] = uu____0;
  }
  return v;
}

libcrux_ml_kem_vector_PortableVector
libcrux_ml_kem_vector___libcrux_ml_kem__vector__traits__Operations_for_libcrux_ml_kem__vector__PortableVector___compress___5int32_t(
  libcrux_ml_kem_vector_PortableVector v
)
{
  return compress___5int32_t(v);
}

static inline libcrux_ml_kem_vector_PortableVector
compress___4int32_t(libcrux_ml_kem_vector_PortableVector v)
{
  for (size_t i = (size_t)0U; i < LIBCRUX_ML_KEM_VECTOR_TRAITS_FIELD_ELEMENTS_IN_VECTOR; i++)
  {
    size_t i0 = i;
    int16_t
    uu____0 = compress_ciphertext_coefficient((uint8_t)(int32_t)4, (uint16_t)v.elements[i0]);
    v.elements[i0] = uu____0;
  }
  return v;
}

libcrux_ml_kem_vector_PortableVector
libcrux_ml_kem_vector___libcrux_ml_kem__vector__traits__Operations_for_libcrux_ml_kem__vector__PortableVector___compress___4int32_t(
  libcrux_ml_kem_vector_PortableVector v
)
{
  return compress___4int32_t(v);
}

static inline libcrux_ml_kem_vector_PortableVector
compress___11int32_t(libcrux_ml_kem_vector_PortableVector v)
{
  for (size_t i = (size_t)0U; i < LIBCRUX_ML_KEM_VECTOR_TRAITS_FIELD_ELEMENTS_IN_VECTOR; i++)
  {
    size_t i0 = i;
    int16_t
    uu____0 = compress_ciphertext_coefficient((uint8_t)(int32_t)11, (uint16_t)v.elements[i0]);
    v.elements[i0] = uu____0;
  }
  return v;
}

libcrux_ml_kem_vector_PortableVector
libcrux_ml_kem_vector___libcrux_ml_kem__vector__traits__Operations_for_libcrux_ml_kem__vector__PortableVector___compress___11int32_t(
  libcrux_ml_kem_vector_PortableVector v
)
{
  return compress___11int32_t(v);
}

static inline libcrux_ml_kem_vector_PortableVector
compress___10int32_t(libcrux_ml_kem_vector_PortableVector v)
{
  for (size_t i = (size_t)0U; i < LIBCRUX_ML_KEM_VECTOR_TRAITS_FIELD_ELEMENTS_IN_VECTOR; i++)
  {
    size_t i0 = i;
    int16_t
    uu____0 = compress_ciphertext_coefficient((uint8_t)(int32_t)10, (uint16_t)v.elements[i0]);
    v.elements[i0] = uu____0;
  }
  return v;
}

libcrux_ml_kem_vector_PortableVector
libcrux_ml_kem_vector___libcrux_ml_kem__vector__traits__Operations_for_libcrux_ml_kem__vector__PortableVector___compress___10int32_t(
  libcrux_ml_kem_vector_PortableVector v
)
{
  return compress___10int32_t(v);
}

libcrux_ml_kem_polynomial_PolynomialRingElement__libcrux_ml_kem_vector_PortableVector
libcrux_ml_kem_polynomial__libcrux_ml_kem__polynomial__PolynomialRingElement_Vector__TraitClause_0___add_message_error_reduce__libcrux_ml_kem_vector_PortableVector(
  libcrux_ml_kem_polynomial_PolynomialRingElement__libcrux_ml_kem_vector_PortableVector *self,
  libcrux_ml_kem_polynomial_PolynomialRingElement__libcrux_ml_kem_vector_PortableVector *message,
  libcrux_ml_kem_polynomial_PolynomialRingElement__libcrux_ml_kem_vector_PortableVector result
)
{
  for (size_t i = (size_t)0U; i < LIBCRUX_ML_KEM_POLYNOMIAL_VECTORS_IN_RING_ELEMENT; i++)
  {
    size_t i0 = i;
    libcrux_ml_kem_vector_PortableVector
    coefficient_normal_form =
      montgomery_multiply_by_constant0(result.coefficients[i0],
        (int16_t)1441);
    libcrux_ml_kem_vector_PortableVector
    tmp =
      libcrux_ml_kem_vector___libcrux_ml_kem__vector__traits__Operations_for_libcrux_ml_kem__vector__PortableVector___add(self->coefficients[i0],
        &message->coefficients[i0]);
    libcrux_ml_kem_vector_PortableVector
    tmp0 =
      libcrux_ml_kem_vector___libcrux_ml_kem__vector__traits__Operations_for_libcrux_ml_kem__vector__PortableVector___add(coefficient_normal_form,
        &tmp);
    libcrux_ml_kem_vector_PortableVector
    uu____0 =
      libcrux_ml_kem_vector___libcrux_ml_kem__vector__traits__Operations_for_libcrux_ml_kem__vector__PortableVector___barrett_reduce(tmp0);
    result.coefficients[i0] = uu____0;
  }
  return result;
}

libcrux_ml_kem_vector_PortableVector
libcrux_ml_kem_vector_traits_decompress_1__libcrux_ml_kem_vector_PortableVector(
  libcrux_ml_kem_vector_PortableVector v
)
{
  return
    bitwise_and_with_constant0(libcrux_ml_kem_vector___libcrux_ml_kem__vector__traits__Operations_for_libcrux_ml_kem__vector__PortableVector___sub(ZERO(),
        &v),
      (int16_t)1665);
}

void
libcrux_ml_kem_polynomial__libcrux_ml_kem__polynomial__PolynomialRingElement_Vector__TraitClause_0___add_error_reduce__libcrux_ml_kem_vector_PortableVector(
  libcrux_ml_kem_polynomial_PolynomialRingElement__libcrux_ml_kem_vector_PortableVector *self,
  libcrux_ml_kem_polynomial_PolynomialRingElement__libcrux_ml_kem_vector_PortableVector *error
)
{
  for (size_t i = (size_t)0U; i < LIBCRUX_ML_KEM_POLYNOMIAL_VECTORS_IN_RING_ELEMENT; i++)
  {
    size_t j = i;
    libcrux_ml_kem_vector_PortableVector
    coefficient_normal_form =
      montgomery_multiply_by_constant0(self->coefficients[j],
        (int16_t)1441);
    libcrux_ml_kem_vector_PortableVector
    uu____0 =
      libcrux_ml_kem_vector___libcrux_ml_kem__vector__traits__Operations_for_libcrux_ml_kem__vector__PortableVector___barrett_reduce(libcrux_ml_kem_vector___libcrux_ml_kem__vector__traits__Operations_for_libcrux_ml_kem__vector__PortableVector___add(coefficient_normal_form,
          &error->coefficients[j]));
    self->coefficients[j] = uu____0;
  }
}

libcrux_ml_kem_polynomial_PolynomialRingElement__libcrux_ml_kem_vector_PortableVector
libcrux_ml_kem_polynomial__libcrux_ml_kem__polynomial__PolynomialRingElement_Vector__TraitClause_0___ZERO__libcrux_ml_kem_vector_PortableVector(
  void
)
{
  libcrux_ml_kem_polynomial_PolynomialRingElement__libcrux_ml_kem_vector_PortableVector lit;
  lit.coefficients[0U] = ZERO();
  lit.coefficients[1U] = ZERO();
  lit.coefficients[2U] = ZERO();
  lit.coefficients[3U] = ZERO();
  lit.coefficients[4U] = ZERO();
  lit.coefficients[5U] = ZERO();
  lit.coefficients[6U] = ZERO();
  lit.coefficients[7U] = ZERO();
  lit.coefficients[8U] = ZERO();
  lit.coefficients[9U] = ZERO();
  lit.coefficients[10U] = ZERO();
  lit.coefficients[11U] = ZERO();
  lit.coefficients[12U] = ZERO();
  lit.coefficients[13U] = ZERO();
  lit.coefficients[14U] = ZERO();
  lit.coefficients[15U] = ZERO();
  return lit;
}

libcrux_ml_kem_polynomial_PolynomialRingElement__libcrux_ml_kem_vector_PortableVector
libcrux_ml_kem_polynomial__libcrux_ml_kem__polynomial__PolynomialRingElement_Vector__TraitClause_0___from_i16_array__libcrux_ml_kem_vector_PortableVector(
  Eurydice_slice a
)
{
  libcrux_ml_kem_polynomial_PolynomialRingElement__libcrux_ml_kem_vector_PortableVector
  result =
    libcrux_ml_kem_polynomial__libcrux_ml_kem__polynomial__PolynomialRingElement_Vector__TraitClause_0___ZERO__libcrux_ml_kem_vector_PortableVector();
  for (size_t i = (size_t)0U; i < LIBCRUX_ML_KEM_POLYNOMIAL_VECTORS_IN_RING_ELEMENT; i++)
  {
    size_t i0 = i;
    libcrux_ml_kem_vector_PortableVector
    uu____0 =
      from_i16_array0(Eurydice_slice_subslice(a,
          (
            (core_ops_range_Range__size_t){
              .start = i0 * (size_t)16U,
              .end = (i0 + (size_t)1U) * (size_t)16U
            }
          ),
          int16_t,
          core_ops_range_Range__size_t,
          Eurydice_slice));
    result.coefficients[i0] = uu____0;
  }
  return result;
}

static inline libcrux_ml_kem_vector_PortableVector
shift_right___15int32_t(libcrux_ml_kem_vector_PortableVector v)
{
  for (size_t i = (size_t)0U; i < LIBCRUX_ML_KEM_VECTOR_TRAITS_FIELD_ELEMENTS_IN_VECTOR; i++)
  {
    size_t i0 = i;
    v.elements[i0] = v.elements[i0] >> (uint32_t)(int32_t)15;
  }
  return v;
}

static libcrux_ml_kem_vector_PortableVector
shift_right___15int32_t0(libcrux_ml_kem_vector_PortableVector v)
{
  return shift_right___15int32_t(v);
}

libcrux_ml_kem_vector_PortableVector
libcrux_ml_kem_vector_traits_to_unsigned_representative__libcrux_ml_kem_vector_PortableVector(
  libcrux_ml_kem_vector_PortableVector a
)
{
  libcrux_ml_kem_vector_PortableVector t = shift_right___15int32_t0(a);
  libcrux_ml_kem_vector_PortableVector
  fm = bitwise_and_with_constant0(t, LIBCRUX_ML_KEM_VECTOR_TRAITS_FIELD_MODULUS);
  return
    libcrux_ml_kem_vector___libcrux_ml_kem__vector__traits__Operations_for_libcrux_ml_kem__vector__PortableVector___add(a,
      &fm);
}

libcrux_ml_kem_polynomial_PolynomialRingElement__libcrux_ml_kem_vector_PortableVector
libcrux_ml_kem_polynomial__libcrux_ml_kem__polynomial__PolynomialRingElement_Vector__TraitClause_0___subtract_reduce__libcrux_ml_kem_vector_PortableVector(
  libcrux_ml_kem_polynomial_PolynomialRingElement__libcrux_ml_kem_vector_PortableVector *self,
  libcrux_ml_kem_polynomial_PolynomialRingElement__libcrux_ml_kem_vector_PortableVector b
)
{
  for (size_t i = (size_t)0U; i < LIBCRUX_ML_KEM_POLYNOMIAL_VECTORS_IN_RING_ELEMENT; i++)
  {
    size_t i0 = i;
    libcrux_ml_kem_vector_PortableVector
    coefficient_normal_form = montgomery_multiply_by_constant0(b.coefficients[i0], (int16_t)1441);
    libcrux_ml_kem_vector_PortableVector
    uu____0 =
      libcrux_ml_kem_vector___libcrux_ml_kem__vector__traits__Operations_for_libcrux_ml_kem__vector__PortableVector___barrett_reduce(libcrux_ml_kem_vector___libcrux_ml_kem__vector__traits__Operations_for_libcrux_ml_kem__vector__PortableVector___sub(self->coefficients[i0],
          &coefficient_normal_form));
    b.coefficients[i0] = uu____0;
  }
  return b;
}

void
libcrux_ml_kem_polynomial__libcrux_ml_kem__polynomial__PolynomialRingElement_Vector__TraitClause_0___add_to_ring_element__libcrux_ml_kem_vector_PortableVector_3size_t(
  libcrux_ml_kem_polynomial_PolynomialRingElement__libcrux_ml_kem_vector_PortableVector *self,
  libcrux_ml_kem_polynomial_PolynomialRingElement__libcrux_ml_kem_vector_PortableVector *rhs
)
{
  for
  (size_t
    i = (size_t)0U;
    i
    <
      core_slice___Slice_T___len(Eurydice_array_to_slice((size_t)16U,
          self->coefficients,
          libcrux_ml_kem_vector_PortableVector,
          Eurydice_slice),
        libcrux_ml_kem_vector_PortableVector,
        size_t);
    i++)
  {
    size_t i0 = i;
    libcrux_ml_kem_vector_PortableVector
    uu____0 =
      libcrux_ml_kem_vector___libcrux_ml_kem__vector__traits__Operations_for_libcrux_ml_kem__vector__PortableVector___add(self->coefficients[i0],
        &rhs->coefficients[i0]);
    self->coefficients[i0] = uu____0;
  }
}

libcrux_ml_kem_polynomial_PolynomialRingElement__libcrux_ml_kem_vector_PortableVector
libcrux_ml_kem_polynomial__libcrux_ml_kem__polynomial__PolynomialRingElement_Vector__TraitClause_0___ntt_multiply__libcrux_ml_kem_vector_PortableVector(
  libcrux_ml_kem_polynomial_PolynomialRingElement__libcrux_ml_kem_vector_PortableVector *self,
  libcrux_ml_kem_polynomial_PolynomialRingElement__libcrux_ml_kem_vector_PortableVector *rhs
)
{
  libcrux_ml_kem_polynomial_PolynomialRingElement__libcrux_ml_kem_vector_PortableVector
  out =
    libcrux_ml_kem_polynomial__libcrux_ml_kem__polynomial__PolynomialRingElement_Vector__TraitClause_0___ZERO__libcrux_ml_kem_vector_PortableVector();
  for (size_t i = (size_t)0U; i < LIBCRUX_ML_KEM_POLYNOMIAL_VECTORS_IN_RING_ELEMENT; i++)
  {
    size_t i0 = i;
    libcrux_ml_kem_vector_PortableVector
    uu____0 =
      ntt_multiply0(&self->coefficients[i0],
        &rhs->coefficients[i0],
        libcrux_ml_kem_polynomial_ZETAS_TIMES_MONTGOMERY_R[(size_t)64U + (size_t)4U * i0],
        libcrux_ml_kem_polynomial_ZETAS_TIMES_MONTGOMERY_R[(size_t)64U
        + (size_t)4U * i0
        + (size_t)1U],
        libcrux_ml_kem_polynomial_ZETAS_TIMES_MONTGOMERY_R[(size_t)64U
        + (size_t)4U * i0
        + (size_t)2U],
        libcrux_ml_kem_polynomial_ZETAS_TIMES_MONTGOMERY_R[(size_t)64U
        + (size_t)4U * i0
        + (size_t)3U]);
    out.coefficients[i0] = uu____0;
  }
  return out;
}

static inline libcrux_ml_kem_vector_PortableVector
decompress_ciphertext_coefficient___5int32_t(libcrux_ml_kem_vector_PortableVector v)
{
  for (size_t i = (size_t)0U; i < LIBCRUX_ML_KEM_VECTOR_TRAITS_FIELD_ELEMENTS_IN_VECTOR; i++)
  {
    size_t i0 = i;
    int32_t
    decompressed = (int32_t)v.elements[i0] * (int32_t)LIBCRUX_ML_KEM_VECTOR_TRAITS_FIELD_MODULUS;
    decompressed = (decompressed << 1U) + ((int32_t)1 << (uint32_t)(int32_t)5);
    decompressed = decompressed >> (uint32_t)((int32_t)5 + (int32_t)1);
    v.elements[i0] = (int16_t)decompressed;
  }
  return v;
}

libcrux_ml_kem_vector_PortableVector
libcrux_ml_kem_vector___libcrux_ml_kem__vector__traits__Operations_for_libcrux_ml_kem__vector__PortableVector___decompress_ciphertext_coefficient___5int32_t(
  libcrux_ml_kem_vector_PortableVector v
)
{
  return decompress_ciphertext_coefficient___5int32_t(v);
}

static inline libcrux_ml_kem_vector_PortableVector
decompress_ciphertext_coefficient___4int32_t(libcrux_ml_kem_vector_PortableVector v)
{
  for (size_t i = (size_t)0U; i < LIBCRUX_ML_KEM_VECTOR_TRAITS_FIELD_ELEMENTS_IN_VECTOR; i++)
  {
    size_t i0 = i;
    int32_t
    decompressed = (int32_t)v.elements[i0] * (int32_t)LIBCRUX_ML_KEM_VECTOR_TRAITS_FIELD_MODULUS;
    decompressed = (decompressed << 1U) + ((int32_t)1 << (uint32_t)(int32_t)4);
    decompressed = decompressed >> (uint32_t)((int32_t)4 + (int32_t)1);
    v.elements[i0] = (int16_t)decompressed;
  }
  return v;
}

libcrux_ml_kem_vector_PortableVector
libcrux_ml_kem_vector___libcrux_ml_kem__vector__traits__Operations_for_libcrux_ml_kem__vector__PortableVector___decompress_ciphertext_coefficient___4int32_t(
  libcrux_ml_kem_vector_PortableVector v
)
{
  return decompress_ciphertext_coefficient___4int32_t(v);
}

void
libcrux_ml_kem_polynomial__libcrux_ml_kem__polynomial__PolynomialRingElement_Vector__TraitClause_0___poly_barrett_reduce__libcrux_ml_kem_vector_PortableVector(
  libcrux_ml_kem_polynomial_PolynomialRingElement__libcrux_ml_kem_vector_PortableVector *self
)
{
  for (size_t i = (size_t)0U; i < LIBCRUX_ML_KEM_POLYNOMIAL_VECTORS_IN_RING_ELEMENT; i++)
  {
    size_t i0 = i;
    libcrux_ml_kem_vector_PortableVector
    uu____0 =
      libcrux_ml_kem_vector___libcrux_ml_kem__vector__traits__Operations_for_libcrux_ml_kem__vector__PortableVector___barrett_reduce(self->coefficients[i0]);
    self->coefficients[i0] = uu____0;
  }
}

libcrux_ml_kem_vector_PortableVector
libcrux_ml_kem_vector_traits_montgomery_multiply_fe__libcrux_ml_kem_vector_PortableVector(
  libcrux_ml_kem_vector_PortableVector v,
  int16_t fer
)
{
  return montgomery_multiply_by_constant0(v, fer);
}

static inline libcrux_ml_kem_vector_PortableVector
decompress_ciphertext_coefficient___11int32_t(libcrux_ml_kem_vector_PortableVector v)
{
  for (size_t i = (size_t)0U; i < LIBCRUX_ML_KEM_VECTOR_TRAITS_FIELD_ELEMENTS_IN_VECTOR; i++)
  {
    size_t i0 = i;
    int32_t
    decompressed = (int32_t)v.elements[i0] * (int32_t)LIBCRUX_ML_KEM_VECTOR_TRAITS_FIELD_MODULUS;
    decompressed = (decompressed << 1U) + ((int32_t)1 << (uint32_t)(int32_t)11);
    decompressed = decompressed >> (uint32_t)((int32_t)11 + (int32_t)1);
    v.elements[i0] = (int16_t)decompressed;
  }
  return v;
}

libcrux_ml_kem_vector_PortableVector
libcrux_ml_kem_vector___libcrux_ml_kem__vector__traits__Operations_for_libcrux_ml_kem__vector__PortableVector___decompress_ciphertext_coefficient___11int32_t(
  libcrux_ml_kem_vector_PortableVector v
)
{
  return decompress_ciphertext_coefficient___11int32_t(v);
}

static inline libcrux_ml_kem_vector_PortableVector
decompress_ciphertext_coefficient___10int32_t(libcrux_ml_kem_vector_PortableVector v)
{
  for (size_t i = (size_t)0U; i < LIBCRUX_ML_KEM_VECTOR_TRAITS_FIELD_ELEMENTS_IN_VECTOR; i++)
  {
    size_t i0 = i;
    int32_t
    decompressed = (int32_t)v.elements[i0] * (int32_t)LIBCRUX_ML_KEM_VECTOR_TRAITS_FIELD_MODULUS;
    decompressed = (decompressed << 1U) + ((int32_t)1 << (uint32_t)(int32_t)10);
    decompressed = decompressed >> (uint32_t)((int32_t)10 + (int32_t)1);
    v.elements[i0] = (int16_t)decompressed;
  }
  return v;
}

libcrux_ml_kem_vector_PortableVector
libcrux_ml_kem_vector___libcrux_ml_kem__vector__traits__Operations_for_libcrux_ml_kem__vector__PortableVector___decompress_ciphertext_coefficient___10int32_t(
  libcrux_ml_kem_vector_PortableVector v
)
{
  return decompress_ciphertext_coefficient___10int32_t(v);
}

